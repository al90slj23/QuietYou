<div class="page-dashboard">
  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <div class="stat-cards">
    <div class="stat-card">
      <div class="stat-card-title">æ€»ç”¨æˆ·æ•°</div>
      <div class="stat-card-value" id="totalUsers">12,580</div>
      <div class="stat-card-trend up">â†‘ 12.5% è¾ƒä¸Šæœˆ</div>
    </div>
    <div class="stat-card">
      <div class="stat-card-title">è®¤è¯æŠ€å¸ˆ</div>
      <div class="stat-card-value" id="totalTechs">386</div>
      <div class="stat-card-trend up">â†‘ 8.2% è¾ƒä¸Šæœˆ</div>
    </div>
    <div class="stat-card">
      <div class="stat-card-title">åˆä½œå•†å®¶</div>
      <div class="stat-card-value" id="totalShops">52</div>
      <div class="stat-card-trend up">â†‘ 5.0% è¾ƒä¸Šæœˆ</div>
    </div>
    <div class="stat-card">
      <div class="stat-card-title">æœ¬æœˆæ”¶å…¥</div>
      <div class="stat-card-value" id="monthRevenue">Â¥128,560</div>
      <div class="stat-card-trend up">â†‘ 18.3% è¾ƒä¸Šæœˆ</div>
    </div>
  </div>

  <!-- ä»Šæ—¥æ•°æ® -->
  <div class="card">
    <div class="card-title">ä»Šæ—¥æ•°æ®</div>
    <div class="today-stats">
      <div class="today-stat-item">
        <div class="today-stat-icon">ğŸ“¦</div>
        <div class="today-stat-info">
          <div class="today-stat-value">68</div>
          <div class="today-stat-label">æ–°è®¢å•</div>
        </div>
      </div>
      <div class="today-stat-item">
        <div class="today-stat-icon">âœ…</div>
        <div class="today-stat-info">
          <div class="today-stat-value">52</div>
          <div class="today-stat-label">å·²å®Œæˆ</div>
        </div>
      </div>
      <div class="today-stat-item">
        <div class="today-stat-icon">ğŸ’°</div>
        <div class="today-stat-info">
          <div class="today-stat-value">Â¥8,960</div>
          <div class="today-stat-label">äº¤æ˜“é¢</div>
        </div>
      </div>
      <div class="today-stat-item">
        <div class="today-stat-icon">ğŸ‘¤</div>
        <div class="today-stat-info">
          <div class="today-stat-value">156</div>
          <div class="today-stat-label">æ´»è·ƒç”¨æˆ·</div>
        </div>
      </div>
      <div class="today-stat-item">
        <div class="today-stat-icon">ğŸ’†</div>
        <div class="today-stat-info">
          <div class="today-stat-value">89</div>
          <div class="today-stat-label">åœ¨çº¿æŠ€å¸ˆ</div>
        </div>
      </div>
      <div class="today-stat-item">
        <div class="today-stat-icon">â­</div>
        <div class="today-stat-info">
          <div class="today-stat-value">4.8</div>
          <div class="today-stat-label">å¹³å‡è¯„åˆ†</div>
        </div>
      </div>
    </div>
  </div>

  <div class="dashboard-grid">
    <!-- å¾…å¤„ç†äº‹é¡¹ -->
    <div class="card">
      <div class="card-title">å¾…å¤„ç†äº‹é¡¹</div>
      <div class="pending-list" id="pendingList">
        <div class="pending-item" onclick="ADMIN.navigateTo('technician/pending')">
          <span class="pending-icon">ğŸ’†</span>
          <span class="pending-text">æŠ€å¸ˆå®¡æ ¸</span>
          <span class="pending-count">5</span>
        </div>
        <div class="pending-item" onclick="ADMIN.navigateTo('shop/pending')">
          <span class="pending-icon">ğŸª</span>
          <span class="pending-text">å•†å®¶å®¡æ ¸</span>
          <span class="pending-count">2</span>
        </div>
        <div class="pending-item" onclick="ADMIN.navigateTo('finance/withdraw')">
          <span class="pending-icon">ğŸ’³</span>
          <span class="pending-text">æç°ç”³è¯·</span>
          <span class="pending-count">8</span>
        </div>
        <div class="pending-item" onclick="ADMIN.navigateTo('order/list', {status: 'refund'})">
          <span class="pending-icon">â†©ï¸</span>
          <span class="pending-text">é€€æ¬¾å¤„ç†</span>
          <span class="pending-count">3</span>
        </div>
      </div>
    </div>

    <!-- æœ€è¿‘è®¢å• -->
    <div class="card">
      <div class="card-title">
        <span>æœ€è¿‘è®¢å•</span>
        <span class="card-link" onclick="ADMIN.navigateTo('order/list')">æŸ¥çœ‹å…¨éƒ¨ ></span>
      </div>
      <div class="recent-orders" id="recentOrders">
        <!-- åŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>
  </div>

  <!-- æ”¶å…¥è¶‹åŠ¿ -->
  <div class="card">
    <div class="card-title">
      <span>æ”¶å…¥è¶‹åŠ¿ï¼ˆè¿‘7å¤©ï¼‰</span>
    </div>
    <div class="chart-container" id="revenueChart">
      <div class="simple-chart">
        <div class="chart-bars" id="chartBars">
          <!-- åŠ¨æ€ç”Ÿæˆ -->
        </div>
        <div class="chart-labels" id="chartLabels">
          <!-- åŠ¨æ€ç”Ÿæˆ -->
        </div>
      </div>
    </div>
  </div>

  <!-- çƒ­é—¨æœåŠ¡ & ä¼˜ç§€æŠ€å¸ˆ -->
  <div class="dashboard-grid">
    <div class="card">
      <div class="card-title">çƒ­é—¨æœåŠ¡ TOP5</div>
      <div class="rank-list" id="hotServices">
        <!-- åŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>
    <div class="card">
      <div class="card-title">ä¼˜ç§€æŠ€å¸ˆ TOP5</div>
      <div class="rank-list" id="topTechs">
        <!-- åŠ¨æ€ç”Ÿæˆ -->
      </div>
    </div>
  </div>
</div>

<style>
.page-dashboard {
  max-width: 1400px;
}

.today-stats {
  display: grid;
  grid-template-columns: repeat(6, 1fr);
  gap: 16px;
}

.today-stat-item {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 16px;
  background: var(--bg-color);
  border-radius: 8px;
}

.today-stat-icon {
  font-size: 28px;
}

.today-stat-value {
  font-size: 20px;
  font-weight: 600;
  color: var(--text-primary);
}

.today-stat-label {
  font-size: 12px;
  color: var(--text-secondary);
  margin-top: 2px;
}

.dashboard-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
}

.pending-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.pending-item {
  display: flex;
  align-items: center;
  padding: 12px 16px;
  background: var(--bg-color);
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

.pending-item:hover {
  background: var(--primary-light);
}

.pending-icon {
  font-size: 20px;
  margin-right: 12px;
}

.pending-text {
  flex: 1;
  font-size: 14px;
}

.pending-count {
  background: var(--error-color);
  color: #fff;
  font-size: 12px;
  padding: 2px 8px;
  border-radius: 10px;
  min-width: 24px;
  text-align: center;
}

.card-link {
  font-size: 12px;
  font-weight: normal;
  color: var(--primary-color);
  cursor: pointer;
}

.recent-orders {
  max-height: 280px;
  overflow-y: auto;
}

.order-item {
  display: flex;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid var(--border-color);
}

.order-item:last-child {
  border-bottom: none;
}

.order-info {
  flex: 1;
}

.order-no {
  font-size: 14px;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.order-service {
  font-size: 12px;
  color: var(--text-secondary);
}

.order-amount {
  font-size: 16px;
  font-weight: 500;
  color: var(--primary-color);
  margin-right: 16px;
}

.chart-container {
  padding: 20px 0;
}

.simple-chart {
  height: 200px;
  display: flex;
  flex-direction: column;
}

.chart-bars {
  flex: 1;
  display: flex;
  align-items: flex-end;
  gap: 24px;
  padding: 0 20px;
}

.chart-bar {
  flex: 1;
  background: var(--primary-color);
  border-radius: 4px 4px 0 0;
  min-height: 20px;
  position: relative;
  transition: all 0.3s;
}

.chart-bar:hover {
  background: #0040b0;
}

.chart-bar-value {
  position: absolute;
  top: -24px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 12px;
  color: var(--text-secondary);
  white-space: nowrap;
}

.chart-labels {
  display: flex;
  gap: 24px;
  padding: 12px 20px 0;
  border-top: 1px solid var(--border-color);
}

.chart-label {
  flex: 1;
  text-align: center;
  font-size: 12px;
  color: var(--text-secondary);
}

.rank-list {
  display: flex;
  flex-direction: column;
}

.rank-item {
  display: flex;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid var(--border-color);
}

.rank-item:last-child {
  border-bottom: none;
}

.rank-num {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--bg-color);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-right: 12px;
}

.rank-num.top1 { background: #ffd700; color: #fff; }
.rank-num.top2 { background: #c0c0c0; color: #fff; }
.rank-num.top3 { background: #cd7f32; color: #fff; }

.rank-name {
  flex: 1;
  font-size: 14px;
}

.rank-value {
  font-size: 14px;
  color: var(--text-secondary);
}

@media (max-width: 1200px) {
  .today-stats {
    grid-template-columns: repeat(3, 1fr);
  }
  .dashboard-grid {
    grid-template-columns: 1fr;
  }
}
</style>

<script>
(function() {
  // æ¨¡æ‹Ÿæœ€è¿‘è®¢å•
  const recentOrders = [
    { no: 'QY20260111001', service: 'ä¸­å¼æ¨æ‹¿60åˆ†é’Ÿ', amount: 298, status: 'completed' },
    { no: 'QY20260111002', service: 'è‚©é¢ˆèˆ’ç¼“45åˆ†é’Ÿ', amount: 198, status: 'in_service' },
    { no: 'QY20260111003', service: 'è¶³åº•æŒ‰æ‘©90åˆ†é’Ÿ', amount: 358, status: 'accepted' },
    { no: 'QY20260111004', service: 'å…¨èº«ç²¾æ²¹SPA', amount: 598, status: 'paid' },
    { no: 'QY20260111005', service: 'æ³°å¼æŒ‰æ‘©60åˆ†é’Ÿ', amount: 328, status: 'completed' }
  ];

  // æ¨¡æ‹Ÿæ”¶å…¥æ•°æ®
  const revenueData = [
    { date: '1/5', value: 6800 },
    { date: '1/6', value: 7200 },
    { date: '1/7', value: 8500 },
    { date: '1/8', value: 7800 },
    { date: '1/9', value: 9200 },
    { date: '1/10', value: 8600 },
    { date: '1/11', value: 8960 }
  ];

  // æ¨¡æ‹Ÿçƒ­é—¨æœåŠ¡
  const hotServices = [
    { name: 'ä¸­å¼æ¨æ‹¿60åˆ†é’Ÿ', count: 256 },
    { name: 'è‚©é¢ˆèˆ’ç¼“45åˆ†é’Ÿ', count: 198 },
    { name: 'è¶³åº•æŒ‰æ‘©90åˆ†é’Ÿ', count: 167 },
    { name: 'å…¨èº«ç²¾æ²¹SPA', count: 145 },
    { name: 'æ³°å¼æŒ‰æ‘©60åˆ†é’Ÿ', count: 132 }
  ];

  // æ¨¡æ‹Ÿä¼˜ç§€æŠ€å¸ˆ
  const topTechs = [
    { name: 'æå¸ˆå‚…', rating: 4.98, orders: 128 },
    { name: 'ç‹å¸ˆå‚…', rating: 4.95, orders: 115 },
    { name: 'å¼ å¸ˆå‚…', rating: 4.92, orders: 108 },
    { name: 'åˆ˜å¸ˆå‚…', rating: 4.90, orders: 96 },
    { name: 'é™ˆå¸ˆå‚…', rating: 4.88, orders: 89 }
  ];

  const statusMap = {
    'paid': { text: 'å¾…æ¥å•', class: 'info' },
    'accepted': { text: 'å¾…æœåŠ¡', class: 'warning' },
    'in_service': { text: 'æœåŠ¡ä¸­', class: 'info' },
    'completed': { text: 'å·²å®Œæˆ', class: 'success' }
  };

  function init() {
    renderRecentOrders();
    renderRevenueChart();
    renderHotServices();
    renderTopTechs();
  }

  function renderRecentOrders() {
    const container = document.getElementById('recentOrders');
    container.innerHTML = recentOrders.map(order => {
      const status = statusMap[order.status];
      return `
        <div class="order-item">
          <div class="order-info">
            <div class="order-no">${order.no}</div>
            <div class="order-service">${order.service}</div>
          </div>
          <div class="order-amount">Â¥${order.amount}</div>
          <span class="status-tag ${status.class}">${status.text}</span>
        </div>
      `;
    }).join('');
  }

  function renderRevenueChart() {
    const maxValue = Math.max(...revenueData.map(d => d.value));
    
    document.getElementById('chartBars').innerHTML = revenueData.map(d => {
      const height = (d.value / maxValue * 100).toFixed(0);
      return `
        <div class="chart-bar" style="height: ${height}%">
          <span class="chart-bar-value">Â¥${(d.value / 1000).toFixed(1)}k</span>
        </div>
      `;
    }).join('');

    document.getElementById('chartLabels').innerHTML = revenueData.map(d => `
      <div class="chart-label">${d.date}</div>
    `).join('');
  }

  function renderHotServices() {
    const container = document.getElementById('hotServices');
    container.innerHTML = hotServices.map((item, index) => {
      let rankClass = '';
      if (index === 0) rankClass = 'top1';
      else if (index === 1) rankClass = 'top2';
      else if (index === 2) rankClass = 'top3';
      
      return `
        <div class="rank-item">
          <div class="rank-num ${rankClass}">${index + 1}</div>
          <div class="rank-name">${item.name}</div>
          <div class="rank-value">${item.count}å•</div>
        </div>
      `;
    }).join('');
  }

  function renderTopTechs() {
    const container = document.getElementById('topTechs');
    container.innerHTML = topTechs.map((item, index) => {
      let rankClass = '';
      if (index === 0) rankClass = 'top1';
      else if (index === 1) rankClass = 'top2';
      else if (index === 2) rankClass = 'top3';
      
      return `
        <div class="rank-item">
          <div class="rank-num ${rankClass}">${index + 1}</div>
          <div class="rank-name">${item.name}</div>
          <div class="rank-value">â­${item.rating} Â· ${item.orders}å•</div>
        </div>
      `;
    }).join('');
  }

  init();
})();
</script>
