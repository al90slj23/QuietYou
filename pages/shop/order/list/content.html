<div class="page-container shop-order-list">
  <!-- ç­›é€‰æ  -->
  <div class="card filter-card">
    <div class="filter-row">
      <div class="filter-item">
        <label>æŠ€å¸ˆ</label>
        <select id="techFilter" onchange="applyFilters()">
          <option value="">å…¨éƒ¨æŠ€å¸ˆ</option>
          <option value="T001">å¼ å¸ˆå‚…</option>
          <option value="T002">æå¸ˆå‚…</option>
          <option value="T003">ç‹å¸ˆå‚…</option>
          <option value="T004">èµµå¸ˆå‚…</option>
        </select>
      </div>
      <div class="filter-item">
        <label>æ—¥æœŸ</label>
        <select id="dateFilter" onchange="applyFilters()">
          <option value="today">ä»Šå¤©</option>
          <option value="week">æœ¬å‘¨</option>
          <option value="month">æœ¬æœˆ</option>
          <option value="all">å…¨éƒ¨</option>
        </select>
      </div>
      <div class="filter-item">
        <label>çŠ¶æ€</label>
        <select id="statusFilter" onchange="applyFilters()">
          <option value="">å…¨éƒ¨çŠ¶æ€</option>
          <option value="pending">å¾…æœåŠ¡</option>
          <option value="in_progress">è¿›è¡Œä¸­</option>
          <option value="completed">å·²å®Œæˆ</option>
          <option value="cancelled">å·²å–æ¶ˆ</option>
        </select>
      </div>
    </div>
  </div>

  <!-- ç»Ÿè®¡æ‘˜è¦ -->
  <div class="card summary-card">
    <div class="summary-item">
      <span class="summary-label">ç­›é€‰ç»“æœ</span>
      <span class="summary-value" id="orderCount">12 å•</span>
    </div>
    <div class="summary-item">
      <span class="summary-label">æ€»é‡‘é¢</span>
      <span class="summary-value text-danger" id="totalAmount">Â¥3,580</span>
    </div>
    <div class="summary-item">
      <span class="summary-label">å•†å®¶åˆ†æˆ</span>
      <span class="summary-value text-primary" id="shopCommission">Â¥716</span>
    </div>
  </div>

  <!-- è®¢å•åˆ—è¡¨ -->
  <div id="orderList" class="order-list">
    <!-- åŠ¨æ€ç”Ÿæˆ -->
  </div>
</div>

<style>
.shop-order-list {
  padding-bottom: 20px;
}

.filter-card {
  padding: 12px;
}

.filter-row {
  display: flex;
  gap: 12px;
}

.filter-item {
  flex: 1;
}

.filter-item label {
  display: block;
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 4px;
}

.filter-item select {
  width: 100%;
  padding: 8px;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  font-size: 13px;
  background: var(--bg-white);
}

.summary-card {
  display: flex;
  justify-content: space-around;
  padding: 12px;
}

.summary-item {
  text-align: center;
}

.summary-label {
  display: block;
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 4px;
}

.summary-value {
  font-size: 16px;
  font-weight: 600;
}

.order-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.shop-order-card {
  background: var(--bg-white);
  border-radius: 8px;
  overflow: hidden;
}

.shop-order-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  background: var(--bg-color);
}

.shop-order-no {
  font-size: 12px;
  color: var(--text-placeholder);
}

.shop-order-status {
  font-size: 12px;
  font-weight: 500;
  padding: 2px 8px;
  border-radius: 4px;
}

.status-pending { background: #e3f2fd; color: #2196f3; }
.status-in_progress { background: #fff3e0; color: #ff9800; }
.status-completed { background: #e8f5e9; color: #4caf50; }
.status-cancelled { background: #ffebee; color: #f44336; }

.shop-order-body {
  padding: 12px;
}

.shop-order-service {
  font-size: 16px;
  font-weight: 500;
  margin-bottom: 8px;
}

.shop-order-info {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 8px;
  font-size: 13px;
}

.shop-order-info-item {
  display: flex;
  align-items: center;
  gap: 4px;
}

.shop-order-info-label {
  color: var(--text-secondary);
}

.shop-order-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px;
  border-top: 1px solid var(--border-color);
}

.shop-order-amount {
  font-size: 18px;
  font-weight: 600;
  color: var(--danger-color);
}

.shop-order-commission {
  font-size: 12px;
  color: var(--text-secondary);
}

.shop-order-commission span {
  color: var(--primary-color);
  font-weight: 500;
}
</style>

<script>
(function() {
  // æ¨¡æ‹Ÿè®¢å•æ•°æ®
  const orders = [
    {
      id: 'ORD20260111001',
      service: 'ä¸­å¼æ¨æ‹¿ 60åˆ†é’Ÿ',
      techId: 'T001',
      techName: 'å¼ å¸ˆå‚…',
      customer: 'æ**',
      time: '2026-01-11 14:00',
      address: 'æœé˜³åŒºå»ºå›½è·¯88å·',
      status: 'completed',
      amount: 298,
      shopCommission: 59.6,
      createDate: '2026-01-11'
    },
    {
      id: 'ORD20260111002',
      service: 'è‚©é¢ˆèˆ’ç¼“ 45åˆ†é’Ÿ',
      techId: 'T002',
      techName: 'æå¸ˆå‚…',
      customer: 'ç‹**',
      time: '2026-01-11 16:30',
      address: 'æœé˜³åŒºæœ›äº¬SOHO',
      status: 'in_progress',
      amount: 198,
      shopCommission: 39.6,
      createDate: '2026-01-11'
    },
    {
      id: 'ORD20260111003',
      service: 'è¶³åº•æŒ‰æ‘© 90åˆ†é’Ÿ',
      techId: 'T003',
      techName: 'ç‹å¸ˆå‚…',
      customer: 'å¼ **',
      time: '2026-01-11 19:00',
      address: 'æµ·æ·€åŒºä¸­å…³æ‘',
      status: 'pending',
      amount: 358,
      shopCommission: 71.6,
      createDate: '2026-01-11'
    },
    {
      id: 'ORD20260110004',
      service: 'å…¨èº«ç²¾æ²¹SPA 120åˆ†é’Ÿ',
      techId: 'T001',
      techName: 'å¼ å¸ˆå‚…',
      customer: 'èµµ**',
      time: '2026-01-10 14:00',
      address: 'è¥¿åŸåŒºé‡‘èè¡—',
      status: 'completed',
      amount: 598,
      shopCommission: 119.6,
      createDate: '2026-01-10'
    },
    {
      id: 'ORD20260109005',
      service: 'ä¸­å¼æ¨æ‹¿ 60åˆ†é’Ÿ',
      techId: 'T004',
      techName: 'èµµå¸ˆå‚…',
      customer: 'å­™**',
      time: '2026-01-09 10:00',
      address: 'ä¸œåŸåŒºç‹åºœäº•',
      status: 'cancelled',
      amount: 298,
      shopCommission: 0,
      createDate: '2026-01-09'
    }
  ];

  const statusTextMap = {
    'pending': 'å¾…æœåŠ¡',
    'in_progress': 'è¿›è¡Œä¸­',
    'completed': 'å·²å®Œæˆ',
    'cancelled': 'å·²å–æ¶ˆ'
  };

  // åˆå§‹åŒ–
  function init() {
    applyFilters();
  }

  // åº”ç”¨ç­›é€‰
  window.applyFilters = function() {
    const techFilter = document.getElementById('techFilter').value;
    const dateFilter = document.getElementById('dateFilter').value;
    const statusFilter = document.getElementById('statusFilter').value;

    let filtered = [...orders];

    // æŠ€å¸ˆç­›é€‰
    if (techFilter) {
      filtered = filtered.filter(o => o.techId === techFilter);
    }

    // æ—¥æœŸç­›é€‰
    const today = '2026-01-11';
    if (dateFilter === 'today') {
      filtered = filtered.filter(o => o.createDate === today);
    } else if (dateFilter === 'week') {
      // ç®€åŒ–ï¼šæœ¬å‘¨
      filtered = filtered.filter(o => o.createDate >= '2026-01-06');
    } else if (dateFilter === 'month') {
      // ç®€åŒ–ï¼šæœ¬æœˆ
      filtered = filtered.filter(o => o.createDate >= '2026-01-01');
    }

    // çŠ¶æ€ç­›é€‰
    if (statusFilter) {
      filtered = filtered.filter(o => o.status === statusFilter);
    }

    // æ›´æ–°ç»Ÿè®¡
    const totalAmount = filtered.reduce((sum, o) => sum + o.amount, 0);
    const totalCommission = filtered.reduce((sum, o) => sum + o.shopCommission, 0);

    document.getElementById('orderCount').textContent = `${filtered.length} å•`;
    document.getElementById('totalAmount').textContent = `Â¥${totalAmount.toLocaleString()}`;
    document.getElementById('shopCommission').textContent = `Â¥${totalCommission.toFixed(2)}`;

    renderOrders(filtered);
  };

  // æ¸²æŸ“è®¢å•åˆ—è¡¨
  function renderOrders(orderList) {
    const container = document.getElementById('orderList');

    if (orderList.length === 0) {
      container.innerHTML = `
        <div class="empty">
          <div class="empty-icon">ğŸ“‹</div>
          <div class="empty-text">æš‚æ— è®¢å•</div>
        </div>
      `;
      return;
    }

    container.innerHTML = orderList.map(order => `
      <div class="shop-order-card" onclick="viewOrderDetail('${order.id}')">
        <div class="shop-order-header">
          <span class="shop-order-no">${order.id}</span>
          <span class="shop-order-status status-${order.status}">${statusTextMap[order.status]}</span>
        </div>
        <div class="shop-order-body">
          <div class="shop-order-service">${order.service}</div>
          <div class="shop-order-info">
            <div class="shop-order-info-item">
              <span class="shop-order-info-label">æŠ€å¸ˆï¼š</span>
              <span>${order.techName}</span>
            </div>
            <div class="shop-order-info-item">
              <span class="shop-order-info-label">å®¢æˆ·ï¼š</span>
              <span>${order.customer}</span>
            </div>
            <div class="shop-order-info-item">
              <span class="shop-order-info-label">æ—¶é—´ï¼š</span>
              <span>${order.time}</span>
            </div>
            <div class="shop-order-info-item">
              <span class="shop-order-info-label">åœ°å€ï¼š</span>
              <span>${order.address}</span>
            </div>
          </div>
        </div>
        <div class="shop-order-footer">
          <div>
            <div class="shop-order-amount">Â¥${order.amount}</div>
            <div class="shop-order-commission">å•†å®¶åˆ†æˆï¼š<span>Â¥${order.shopCommission.toFixed(2)}</span></div>
          </div>
        </div>
      </div>
    `).join('');
  }

  // æŸ¥çœ‹è®¢å•è¯¦æƒ…
  window.viewOrderDetail = function(orderId) {
    SHOP.navigateTo('order/detail', { id: orderId });
  };

  init();
})();
</script>
