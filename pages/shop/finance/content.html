<div class="page-container shop-finance">
  <!-- ä½™é¢å¡ç‰‡ -->
  <div class="card balance-card">
    <div class="balance-header">
      <span class="balance-label">å¯æç°ä½™é¢(å…ƒ)</span>
      <span class="balance-eye" onclick="toggleBalance()">ğŸ‘ï¸</span>
    </div>
    <div class="balance-amount" id="balanceAmount">8,560.00</div>
    <div class="balance-actions">
      <button class="btn btn-light" onclick="SHOP.navigateTo('finance/withdraw')">æç°</button>
      <button class="btn btn-light" onclick="SHOP.navigateTo('finance/records')">æ˜ç»†</button>
    </div>
  </div>

  <!-- å…¶ä»–ä½™é¢ -->
  <div class="card">
    <div class="other-balance">
      <div class="other-balance-item">
        <div class="other-balance-label">å¾…ç»“ç®—</div>
        <div class="other-balance-value" id="pendingAmount">Â¥1,280.00</div>
        <div class="other-balance-tip">è®¢å•å®Œæˆå7å¤©ç»“ç®—</div>
      </div>
      <div class="other-balance-divider"></div>
      <div class="other-balance-item">
        <div class="other-balance-label">ç´¯è®¡æ”¶å…¥</div>
        <div class="other-balance-value" id="totalAmount">Â¥68,920.00</div>
        <div class="other-balance-tip">å…¥é©»ä»¥æ¥æ€»æ”¶å…¥</div>
      </div>
    </div>
  </div>

  <!-- æœ¬æœˆæ”¶å…¥ç»Ÿè®¡ -->
  <div class="card">
    <div class="card-title flex-between">
      <span>æœ¬æœˆæ”¶å…¥</span>
      <span class="text-secondary" style="font-size:12px;font-weight:normal;">2026å¹´1æœˆ</span>
    </div>
    <div class="month-stats">
      <div class="month-stat-item">
        <div class="month-stat-value">Â¥12,680</div>
        <div class="month-stat-label">æ€»æ”¶å…¥</div>
      </div>
      <div class="month-stat-item">
        <div class="month-stat-value">58</div>
        <div class="month-stat-label">å®Œæˆè®¢å•</div>
      </div>
      <div class="month-stat-item">
        <div class="month-stat-value">Â¥218</div>
        <div class="month-stat-label">å¹³å‡å•ä»·</div>
      </div>
    </div>
  </div>

  <!-- åˆ†æˆæ˜ç»† -->
  <div class="card">
    <div class="card-title">æœ¬æœˆåˆ†æˆæ˜ç»†</div>
    <div class="commission-breakdown">
      <div class="commission-row">
        <span class="commission-label">è®¢å•æ€»é¢</span>
        <span class="commission-value">Â¥42,680.00</span>
      </div>
      <div class="commission-row">
        <span class="commission-label">å¹³å°æŠ½æˆ (15%)</span>
        <span class="commission-value deduct">-Â¥6,402.00</span>
      </div>
      <div class="commission-row">
        <span class="commission-label">æŠ€å¸ˆåˆ†æˆ (55%)</span>
        <span class="commission-value deduct">-Â¥23,474.00</span>
      </div>
      <div class="commission-row total">
        <span class="commission-label">å•†å®¶æ”¶å…¥ (30%)</span>
        <span class="commission-value income">Â¥12,804.00</span>
      </div>
    </div>
  </div>

  <!-- æŠ€å¸ˆæ”¶å…¥æ’è¡Œ -->
  <div class="card">
    <div class="card-title">æŠ€å¸ˆæ”¶å…¥æ’è¡Œ</div>
    <div class="tech-rank-list" id="techRankList">
      <!-- åŠ¨æ€ç”Ÿæˆ -->
    </div>
  </div>

  <!-- æœ€è¿‘äº¤æ˜“ -->
  <div class="card">
    <div class="card-title flex-between">
      <span>æœ€è¿‘äº¤æ˜“</span>
      <span class="text-secondary" style="font-size:12px;font-weight:normal;cursor:pointer;" onclick="SHOP.navigateTo('finance/records')">æŸ¥çœ‹å…¨éƒ¨ ></span>
    </div>
    <div class="transaction-list" id="transactionList">
      <!-- åŠ¨æ€ç”Ÿæˆ -->
    </div>
  </div>

  <!-- ç»“ç®—è¯´æ˜ -->
  <div class="card">
    <div class="card-title">ç»“ç®—è¯´æ˜</div>
    <div class="settle-tips">
      <div class="tip-item"><t-icon name="wallet" size="14px" /> æœ€ä½æç°é‡‘é¢ï¼š100å…ƒ</div>
      <div class="tip-item"><t-icon name="time" size="14px" /> æç°åˆ°è´¦æ—¶é—´ï¼š1-3ä¸ªå·¥ä½œæ—¥</div>
      <div class="tip-item"><t-icon name="calendar" size="14px" /> ç»“ç®—å‘¨æœŸï¼šæ¯å‘¨ä¸€ç»“ç®—ä¸Šå‘¨è®¢å•</div>
      <div class="tip-item"><t-icon name="chart-pie" size="14px" /> åˆ†æˆæ¯”ä¾‹ï¼šå¹³å°15% / å•†å®¶30% / æŠ€å¸ˆ55%</div>
    </div>
  </div>
</div>

<style>
.balance-card {
  background: linear-gradient(135deg, var(--primary-color) 0%, #e65100 100%);
  color: #fff;
  padding: 20px;
}

.balance-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 8px;
}

.balance-label {
  font-size: 14px;
  opacity: 0.9;
}

.balance-eye {
  cursor: pointer;
  opacity: 0.8;
}

.balance-amount {
  font-size: 36px;
  font-weight: 600;
  margin-bottom: 20px;
}

.balance-amount.hidden {
  letter-spacing: 4px;
}

.balance-actions {
  display: flex;
  gap: 12px;
}

.balance-actions .btn-light {
  flex: 1;
  background: rgba(255,255,255,0.2);
  color: #fff;
  border: 1px solid rgba(255,255,255,0.3);
}

.other-balance {
  display: flex;
}

.other-balance-item {
  flex: 1;
  text-align: center;
  padding: 8px;
}

.other-balance-divider {
  width: 1px;
  background: var(--border-color);
  margin: 8px 0;
}

.other-balance-label {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 4px;
}

.other-balance-value {
  font-size: 18px;
  font-weight: 600;
  color: var(--text-primary);
}

.other-balance-tip {
  font-size: 10px;
  color: var(--text-placeholder);
  margin-top: 4px;
}

.month-stats {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 12px;
}

.month-stat-item {
  text-align: center;
  padding: 12px 8px;
  background: var(--bg-color);
  border-radius: 8px;
}

.month-stat-value {
  font-size: 20px;
  font-weight: 600;
  color: var(--primary-color);
}

.month-stat-label {
  font-size: 12px;
  color: var(--text-secondary);
  margin-top: 4px;
}

.commission-breakdown {
  padding: 8px 0;
}

.commission-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px 0;
  border-bottom: 1px dashed var(--border-color);
}

.commission-row:last-child {
  border-bottom: none;
}

.commission-row.total {
  border-top: 1px solid var(--border-color);
  border-bottom: none;
  margin-top: 8px;
  padding-top: 16px;
}

.commission-label {
  font-size: 14px;
  color: var(--text-secondary);
}

.commission-row.total .commission-label {
  font-weight: 600;
  color: var(--text-primary);
}

.commission-value {
  font-size: 14px;
  color: var(--text-primary);
}

.commission-value.deduct {
  color: var(--text-secondary);
}

.commission-value.income {
  font-size: 18px;
  font-weight: 600;
  color: var(--primary-color);
}

.tech-rank-list {
  max-height: 240px;
  overflow-y: auto;
}

.tech-rank-item {
  display: flex;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid var(--border-color);
}

.tech-rank-item:last-child {
  border-bottom: none;
}

.tech-rank-num {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: var(--bg-color);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  margin-right: 12px;
}

.tech-rank-num.top1 {
  background: #ffd700;
  color: #fff;
}

.tech-rank-num.top2 {
  background: #c0c0c0;
  color: #fff;
}

.tech-rank-num.top3 {
  background: #cd7f32;
  color: #fff;
}

.tech-rank-avatar {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: var(--bg-color);
  margin-right: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
}

.tech-rank-info {
  flex: 1;
}

.tech-rank-name {
  font-size: 14px;
  color: var(--text-primary);
  margin-bottom: 2px;
}

.tech-rank-orders {
  font-size: 12px;
  color: var(--text-placeholder);
}

.tech-rank-amount {
  font-size: 16px;
  font-weight: 600;
  color: var(--primary-color);
}

.transaction-list {
  max-height: 300px;
  overflow-y: auto;
}

.transaction-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 0;
  border-bottom: 1px solid var(--border-color);
}

.transaction-item:last-child {
  border-bottom: none;
}

.transaction-info {
  flex: 1;
}

.transaction-title {
  font-size: 14px;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.transaction-time {
  font-size: 12px;
  color: var(--text-placeholder);
}

.transaction-amount {
  font-size: 16px;
  font-weight: 500;
}

.transaction-amount.income {
  color: var(--success-color);
}

.transaction-amount.expense {
  color: var(--text-primary);
}

.settle-tips {
  font-size: 13px;
  color: var(--text-secondary);
  line-height: 2;
}

.tip-item {
  padding: 4px 0;
}
</style>

<script>
(function() {
  // æ¨¡æ‹Ÿé’±åŒ…æ•°æ®
  const financeData = {
    availableBalance: 8560.00,
    pendingBalance: 1280.00,
    totalEarnings: 68920.00,
    monthlyStats: {
      income: 12680,
      orders: 58,
      avgPrice: 218
    }
  };

  // æ¨¡æ‹ŸæŠ€å¸ˆæ”¶å…¥æ’è¡Œ
  const techRankData = [
    { id: 1, name: 'æå¸ˆå‚…', avatar: 'user', orders: 18, amount: 3960 },
    { id: 2, name: 'ç‹å¸ˆå‚…', avatar: 'user', orders: 15, amount: 3300 },
    { id: 3, name: 'å¼ å¸ˆå‚…', avatar: 'user', orders: 12, amount: 2640 },
    { id: 4, name: 'åˆ˜å¸ˆå‚…', avatar: 'user', orders: 8, amount: 1760 },
    { id: 5, name: 'é™ˆå¸ˆå‚…', avatar: 'user', orders: 5, amount: 1020 }
  ];

  // æ¨¡æ‹Ÿäº¤æ˜“è®°å½•
  const transactions = [
    { id: 1, type: 'income', title: 'è®¢å•åˆ†æˆ - æå¸ˆå‚…', amount: 89.40, time: '2026-01-11 16:00' },
    { id: 2, type: 'income', title: 'è®¢å•åˆ†æˆ - ç‹å¸ˆå‚…', amount: 71.40, time: '2026-01-11 14:30' },
    { id: 3, type: 'expense', title: 'æç°åˆ°é“¶è¡Œå¡', amount: -2000.00, time: '2026-01-10 10:00' },
    { id: 4, type: 'income', title: 'è®¢å•åˆ†æˆ - å¼ å¸ˆå‚…', amount: 65.40, time: '2026-01-09 19:00' },
    { id: 5, type: 'income', title: 'å‘¨ç»“ç®—å…¥è´¦', amount: 3580.00, time: '2026-01-06 00:00' }
  ];

  let balanceVisible = true;

  // åˆå§‹åŒ–
  function init() {
    renderTechRank();
    renderTransactions();
  }

  // åˆ‡æ¢ä½™é¢æ˜¾ç¤º
  window.toggleBalance = function() {
    balanceVisible = !balanceVisible;
    const balanceEl = document.getElementById('balanceAmount');
    
    if (balanceVisible) {
      balanceEl.textContent = financeData.availableBalance.toLocaleString('zh-CN', { minimumFractionDigits: 2 });
      balanceEl.classList.remove('hidden');
    } else {
      balanceEl.textContent = '****';
      balanceEl.classList.add('hidden');
    }
  };

  // æ¸²æŸ“æŠ€å¸ˆæ’è¡Œ
  function renderTechRank() {
    const container = document.getElementById('techRankList');
    
    container.innerHTML = techRankData.map((tech, index) => {
      let rankClass = '';
      if (index === 0) rankClass = 'top1';
      else if (index === 1) rankClass = 'top2';
      else if (index === 2) rankClass = 'top3';
      
      return `
        <div class="tech-rank-item">
          <div class="tech-rank-num ${rankClass}">${index + 1}</div>
          <div class="tech-rank-avatar">${tech.avatar}</div>
          <div class="tech-rank-info">
            <div class="tech-rank-name">${tech.name}</div>
            <div class="tech-rank-orders">${tech.orders}å•</div>
          </div>
          <div class="tech-rank-amount">Â¥${tech.amount.toLocaleString()}</div>
        </div>
      `;
    }).join('');
  }

  // æ¸²æŸ“äº¤æ˜“è®°å½•
  function renderTransactions() {
    const container = document.getElementById('transactionList');
    
    if (transactions.length === 0) {
      container.innerHTML = '<div class="empty"><div class="empty-text">æš‚æ— äº¤æ˜“è®°å½•</div></div>';
      return;
    }

    container.innerHTML = transactions.map(tx => {
      const amountClass = tx.type === 'income' ? 'income' : 'expense';
      const amountPrefix = tx.type === 'income' ? '+' : '';
      
      return `
        <div class="transaction-item">
          <div class="transaction-info">
            <div class="transaction-title">${tx.title}</div>
            <div class="transaction-time">${tx.time}</div>
          </div>
          <div class="transaction-amount ${amountClass}">
            ${amountPrefix}Â¥${Math.abs(tx.amount).toFixed(2)}
          </div>
        </div>
      `;
    }).join('');
  }

  init();
})();
</script>
