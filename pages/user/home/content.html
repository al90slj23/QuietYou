<div class="home-page">
  <!-- Banner 轮播 -->
  <div class="banner-section">
    <div class="banner-swiper" id="bannerSwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <div class="banner-item" style="background: linear-gradient(135deg, #07c160 0%, #10b981 100%);">
            <div class="banner-content">
              <h3>轻养调理，随叫随松</h3>
              <p>专业技师上门服务</p>
            </div>
          </div>
        </div>
        <div class="swiper-slide">
          <div class="banner-item" style="background: linear-gradient(135deg, #576b95 0%, #6366f1 100%);">
            <div class="banner-content">
              <h3>新用户专享</h3>
              <p>首单立减30元</p>
            </div>
          </div>
        </div>
        <div class="swiper-slide">
          <div class="banner-item" style="background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);">
            <div class="banner-content">
              <h3>品质保障</h3>
              <p>正规门店技师，安心服务</p>
            </div>
          </div>
        </div>
      </div>
      <div class="swiper-pagination" id="bannerPagination"></div>
    </div>
  </div>

  <!-- 服务分类 -->
  <div class="category-section card">
    <div class="card-title">服务分类</div>
    <div class="category-grid grid grid-4" id="categoryGrid">
      <!-- 动态加载 -->
    </div>
  </div>

  <!-- 热门服务 -->
  <div class="hot-service-section card">
    <div class="card-title flex flex-between">
      <span>热门服务</span>
      <span class="text-secondary" style="font-size: 12px; font-weight: normal;" onclick="QY.navigateTo('service/list')">
        查看全部 &gt;
      </span>
    </div>
    <div class="service-list" id="hotServiceList">
      <!-- 动态加载 -->
    </div>
  </div>

  <!-- 推荐技师 -->
  <div class="recommend-tech-section card">
    <div class="card-title flex flex-between">
      <span>推荐技师</span>
      <span class="text-secondary" style="font-size: 12px; font-weight: normal;" onclick="QY.navigateTo('technician/list')">
        查看全部 &gt;
      </span>
    </div>
    <div class="tech-list" id="recommendTechList">
      <!-- 动态加载 -->
    </div>
  </div>
</div>

<style>
/* Banner */
.banner-section {
  padding: 12px;
}

.banner-swiper {
  position: relative;
  overflow: hidden;
  border-radius: 8px;
}

.swiper-wrapper {
  display: flex;
  transition: transform 0.3s ease;
}

.swiper-slide {
  flex-shrink: 0;
  width: 100%;
}

.banner-item {
  height: 140px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  padding: 20px;
}

.banner-content {
  color: #fff;
}

.banner-content h3 {
  font-size: 20px;
  font-weight: 600;
  margin-bottom: 8px;
}

.banner-content p {
  font-size: 14px;
  opacity: 0.9;
}

.swiper-pagination {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 6px;
}

.swiper-pagination .dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.5);
  transition: all 0.3s;
}

.swiper-pagination .dot.active {
  width: 16px;
  border-radius: 3px;
  background: #fff;
}

/* Category Grid */
.category-grid {
  gap: 16px;
}

.category-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
}

.category-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  margin-bottom: 8px;
}

.category-name {
  font-size: 12px;
  color: var(--text-primary);
}

/* Service List */
.service-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.service-item {
  display: flex;
  padding: 12px;
  background: var(--bg-color);
  border-radius: 8px;
  cursor: pointer;
}

.service-item:active {
  opacity: 0.8;
}

.service-image {
  width: 80px;
  height: 80px;
  border-radius: 8px;
  background: linear-gradient(135deg, #e8f8ef 0%, #d1fae5 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  flex-shrink: 0;
}

.service-info {
  flex: 1;
  margin-left: 12px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.service-name {
  font-size: 15px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.service-desc {
  font-size: 12px;
  color: var(--text-secondary);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.service-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 8px;
}

.service-duration {
  font-size: 12px;
  color: var(--text-placeholder);
}

.service-price {
  font-size: 16px;
  font-weight: 600;
  color: var(--danger-color);
}

.service-price::before {
  content: '¥';
  font-size: 12px;
}

/* Tech List */
.tech-list {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  padding-bottom: 4px;
  -webkit-overflow-scrolling: touch;
}

.tech-list::-webkit-scrollbar {
  display: none;
}

.tech-card {
  flex-shrink: 0;
  width: 120px;
  padding: 12px;
  background: var(--bg-color);
  border-radius: 8px;
  text-align: center;
  cursor: pointer;
}

.tech-card:active {
  opacity: 0.8;
}

.tech-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(135deg, #e8f8ef 0%, #d1fae5 100%);
  margin: 0 auto 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
}

.tech-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.tech-rating {
  font-size: 12px;
  color: var(--warning-color);
}

.tech-orders {
  font-size: 11px;
  color: var(--text-placeholder);
  margin-top: 4px;
}
</style>


<script>
(function() {
  // Mock 数据 - 服务分类
  const categories = [
    { id: 1, name: '中式推拿', icon: 'gesture-press', color: '#e8f8ef' },
    { id: 2, name: '泰式按摩', icon: 'spa', color: '#fef3c7' },
    { id: 3, name: '足疗保健', icon: 'service', color: '#dbeafe' },
    { id: 4, name: '精油SPA', icon: 'flower', color: '#fce7f3' },
    { id: 5, name: '肩颈调理', icon: 'heart', color: '#e0e7ff' },
    { id: 6, name: '艾灸理疗', icon: 'tips', color: '#fee2e2' },
    { id: 7, name: '刮痧拔罐', icon: 'service', color: '#d1fae5' },
    { id: 8, name: '更多服务', icon: 'add', color: '#f3f4f6' }
  ];

  // Mock 数据 - 热门服务
  const hotServices = [
    { 
      id: 1, 
      name: '全身中式推拿', 
      desc: '传统手法，疏通经络，缓解疲劳',
      duration: 60,
      price: 298,
      icon: 'gesture-press'
    },
    { 
      id: 2, 
      name: '肩颈深度调理', 
      desc: '针对久坐人群，专业手法放松肩颈',
      duration: 45,
      price: 198,
      icon: 'heart'
    },
    { 
      id: 3, 
      name: '足底反射疗法', 
      desc: '刺激足底穴位，促进血液循环',
      duration: 60,
      price: 168,
      icon: 'service'
    }
  ];

  // Mock 数据 - 推荐技师
  const recommendTechs = [
    { id: 1, name: '张师傅', rating: 4.9, orders: 328, avatar: 'user' },
    { id: 2, name: '李师傅', rating: 4.8, orders: 256, avatar: 'user' },
    { id: 3, name: '王师傅', rating: 4.9, orders: 412, avatar: 'user' },
    { id: 4, name: '陈师傅', rating: 4.7, orders: 189, avatar: 'user' },
    { id: 5, name: '刘师傅', rating: 4.8, orders: 275, avatar: 'user' }
  ];

  // 渲染分类
  function renderCategories() {
    const grid = document.getElementById('categoryGrid');
    grid.innerHTML = categories.map(cat => `
      <div class="category-item" onclick="QY.navigateTo('service/list', { categoryId: ${cat.id} })">
        <div class="category-icon" style="background: ${cat.color}">
          <t-icon name="${cat.icon}" size="24px" />
        </div>
        <span class="category-name">${cat.name}</span>
      </div>
    `).join('');
  }

  // 渲染热门服务
  function renderHotServices() {
    const list = document.getElementById('hotServiceList');
    list.innerHTML = hotServices.map(service => `
      <div class="service-item" onclick="QY.navigateTo('service/detail', { id: ${service.id} })">
        <div class="service-image"><t-icon name="${service.icon}" size="32px" /></div>
        <div class="service-info">
          <div>
            <div class="service-name">${service.name}</div>
            <div class="service-desc">${service.desc}</div>
          </div>
          <div class="service-meta">
            <span class="service-duration">${service.duration}分钟</span>
            <span class="service-price">${service.price}起</span>
          </div>
        </div>
      </div>
    `).join('');
  }

  // 渲染推荐技师
  function renderRecommendTechs() {
    const list = document.getElementById('recommendTechList');
    list.innerHTML = recommendTechs.map(tech => `
      <div class="tech-card" onclick="QY.navigateTo('technician/detail', { id: ${tech.id} })">
        <div class="tech-avatar"><t-icon name="${tech.avatar}" size="28px" /></div>
        <div class="tech-name">${tech.name}</div>
        <div class="tech-rating"><t-icon name="star-filled" size="12px" /> ${tech.rating}</div>
        <div class="tech-orders">已服务${tech.orders}单</div>
      </div>
    `).join('');
  }

  // Banner 轮播
  function initBannerSwiper() {
    const wrapper = document.querySelector('.swiper-wrapper');
    const slides = document.querySelectorAll('.swiper-slide');
    const pagination = document.getElementById('bannerPagination');
    let currentIndex = 0;
    const total = slides.length;

    // 创建分页点
    pagination.innerHTML = Array.from({ length: total }, (_, i) => 
      `<span class="dot ${i === 0 ? 'active' : ''}"></span>`
    ).join('');

    const dots = pagination.querySelectorAll('.dot');

    function goToSlide(index) {
      currentIndex = index;
      wrapper.style.transform = `translateX(-${index * 100}%)`;
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });
    }

    // 自动轮播
    setInterval(() => {
      goToSlide((currentIndex + 1) % total);
    }, 4000);

    // 触摸滑动支持
    let startX = 0;
    let isDragging = false;

    wrapper.addEventListener('touchstart', (e) => {
      startX = e.touches[0].clientX;
      isDragging = true;
    });

    wrapper.addEventListener('touchend', (e) => {
      if (!isDragging) return;
      const endX = e.changedTouches[0].clientX;
      const diff = startX - endX;
      
      if (Math.abs(diff) > 50) {
        if (diff > 0 && currentIndex < total - 1) {
          goToSlide(currentIndex + 1);
        } else if (diff < 0 && currentIndex > 0) {
          goToSlide(currentIndex - 1);
        }
      }
      isDragging = false;
    });
  }

  // 初始化
  renderCategories();
  renderHotServices();
  renderRecommendTechs();
  initBannerSwiper();

})();
</script>
