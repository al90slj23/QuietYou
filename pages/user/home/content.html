<div class="home-page">
  <!-- Banner è½®æ’­ -->
  <div class="banner-section">
    <div class="banner-swiper" id="bannerSwiper">
      <div class="swiper-wrapper">
        <div class="swiper-slide">
          <div class="banner-item" style="background: linear-gradient(135deg, #07c160 0%, #10b981 100%);">
            <div class="banner-content">
              <h3>è½»å…»è°ƒç†ï¼Œéšå«éšæ¾</h3>
              <p>ä¸“ä¸šæŠ€å¸ˆä¸Šé—¨æœåŠ¡</p>
            </div>
          </div>
        </div>
        <div class="swiper-slide">
          <div class="banner-item" style="background: linear-gradient(135deg, #576b95 0%, #6366f1 100%);">
            <div class="banner-content">
              <h3>æ–°ç”¨æˆ·ä¸“äº«</h3>
              <p>é¦–å•ç«‹å‡30å…ƒ</p>
            </div>
          </div>
        </div>
        <div class="swiper-slide">
          <div class="banner-item" style="background: linear-gradient(135deg, #f59e0b 0%, #f97316 100%);">
            <div class="banner-content">
              <h3>å“è´¨ä¿éšœ</h3>
              <p>æ­£è§„é—¨åº—æŠ€å¸ˆï¼Œå®‰å¿ƒæœåŠ¡</p>
            </div>
          </div>
        </div>
      </div>
      <div class="swiper-pagination" id="bannerPagination"></div>
    </div>
  </div>

  <!-- æœåŠ¡åˆ†ç±» -->
  <div class="category-section card">
    <div class="card-title">æœåŠ¡åˆ†ç±»</div>
    <div class="category-grid grid grid-4" id="categoryGrid">
      <!-- åŠ¨æ€åŠ è½½ -->
    </div>
  </div>

  <!-- çƒ­é—¨æœåŠ¡ -->
  <div class="hot-service-section card">
    <div class="card-title flex flex-between">
      <span>çƒ­é—¨æœåŠ¡</span>
      <span class="text-secondary" style="font-size: 12px; font-weight: normal;" onclick="QY.navigateTo('service/list')">
        æŸ¥çœ‹å…¨éƒ¨ &gt;
      </span>
    </div>
    <div class="service-list" id="hotServiceList">
      <!-- åŠ¨æ€åŠ è½½ -->
    </div>
  </div>

  <!-- æ¨èæŠ€å¸ˆ -->
  <div class="recommend-tech-section card">
    <div class="card-title flex flex-between">
      <span>æ¨èæŠ€å¸ˆ</span>
      <span class="text-secondary" style="font-size: 12px; font-weight: normal;" onclick="QY.navigateTo('technician/list')">
        æŸ¥çœ‹å…¨éƒ¨ &gt;
      </span>
    </div>
    <div class="tech-list" id="recommendTechList">
      <!-- åŠ¨æ€åŠ è½½ -->
    </div>
  </div>
</div>

<style>
/* Banner */
.banner-section {
  padding: 12px;
}

.banner-swiper {
  position: relative;
  overflow: hidden;
  border-radius: 8px;
}

.swiper-wrapper {
  display: flex;
  transition: transform 0.3s ease;
}

.swiper-slide {
  flex-shrink: 0;
  width: 100%;
}

.banner-item {
  height: 140px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  padding: 20px;
}

.banner-content {
  color: #fff;
}

.banner-content h3 {
  font-size: 20px;
  font-weight: 600;
  margin-bottom: 8px;
}

.banner-content p {
  font-size: 14px;
  opacity: 0.9;
}

.swiper-pagination {
  position: absolute;
  bottom: 10px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 6px;
}

.swiper-pagination .dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.5);
  transition: all 0.3s;
}

.swiper-pagination .dot.active {
  width: 16px;
  border-radius: 3px;
  background: #fff;
}

/* Category Grid */
.category-grid {
  gap: 16px;
}

.category-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  cursor: pointer;
}

.category-icon {
  width: 48px;
  height: 48px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  margin-bottom: 8px;
}

.category-name {
  font-size: 12px;
  color: var(--text-primary);
}

/* Service List */
.service-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.service-item {
  display: flex;
  padding: 12px;
  background: var(--bg-color);
  border-radius: 8px;
  cursor: pointer;
}

.service-item:active {
  opacity: 0.8;
}

.service-image {
  width: 80px;
  height: 80px;
  border-radius: 8px;
  background: linear-gradient(135deg, #e8f8ef 0%, #d1fae5 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  flex-shrink: 0;
}

.service-info {
  flex: 1;
  margin-left: 12px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.service-name {
  font-size: 15px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.service-desc {
  font-size: 12px;
  color: var(--text-secondary);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

.service-meta {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: 8px;
}

.service-duration {
  font-size: 12px;
  color: var(--text-placeholder);
}

.service-price {
  font-size: 16px;
  font-weight: 600;
  color: var(--danger-color);
}

.service-price::before {
  content: 'Â¥';
  font-size: 12px;
}

/* Tech List */
.tech-list {
  display: flex;
  gap: 12px;
  overflow-x: auto;
  padding-bottom: 4px;
  -webkit-overflow-scrolling: touch;
}

.tech-list::-webkit-scrollbar {
  display: none;
}

.tech-card {
  flex-shrink: 0;
  width: 120px;
  padding: 12px;
  background: var(--bg-color);
  border-radius: 8px;
  text-align: center;
  cursor: pointer;
}

.tech-card:active {
  opacity: 0.8;
}

.tech-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background: linear-gradient(135deg, #e8f8ef 0%, #d1fae5 100%);
  margin: 0 auto 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 28px;
}

.tech-name {
  font-size: 14px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.tech-rating {
  font-size: 12px;
  color: var(--warning-color);
}

.tech-orders {
  font-size: 11px;
  color: var(--text-placeholder);
  margin-top: 4px;
}
</style>


<script>
(function() {
  // Mock æ•°æ® - æœåŠ¡åˆ†ç±»
  const categories = [
    { id: 1, name: 'ä¸­å¼æ¨æ‹¿', icon: 'ğŸ’†', color: '#e8f8ef' },
    { id: 2, name: 'æ³°å¼æŒ‰æ‘©', icon: 'ğŸ§˜', color: '#fef3c7' },
    { id: 3, name: 'è¶³ç–—ä¿å¥', icon: 'ğŸ¦¶', color: '#dbeafe' },
    { id: 4, name: 'ç²¾æ²¹SPA', icon: 'ğŸŒ¸', color: '#fce7f3' },
    { id: 5, name: 'è‚©é¢ˆè°ƒç†', icon: 'ğŸ’ª', color: '#e0e7ff' },
    { id: 6, name: 'è‰¾ç¸ç†ç–—', icon: 'ğŸ”¥', color: '#fee2e2' },
    { id: 7, name: 'åˆ®ç—§æ‹”ç½', icon: 'ğŸº', color: '#d1fae5' },
    { id: 8, name: 'æ›´å¤šæœåŠ¡', icon: 'â•', color: '#f3f4f6' }
  ];

  // Mock æ•°æ® - çƒ­é—¨æœåŠ¡
  const hotServices = [
    { 
      id: 1, 
      name: 'å…¨èº«ä¸­å¼æ¨æ‹¿', 
      desc: 'ä¼ ç»Ÿæ‰‹æ³•ï¼Œç–é€šç»ç»œï¼Œç¼“è§£ç–²åŠ³',
      duration: 60,
      price: 298,
      icon: 'ğŸ’†'
    },
    { 
      id: 2, 
      name: 'è‚©é¢ˆæ·±åº¦è°ƒç†', 
      desc: 'é’ˆå¯¹ä¹…åäººç¾¤ï¼Œä¸“ä¸šæ‰‹æ³•æ”¾æ¾è‚©é¢ˆ',
      duration: 45,
      price: 198,
      icon: 'ğŸ’ª'
    },
    { 
      id: 3, 
      name: 'è¶³åº•åå°„ç–—æ³•', 
      desc: 'åˆºæ¿€è¶³åº•ç©´ä½ï¼Œä¿ƒè¿›è¡€æ¶²å¾ªç¯',
      duration: 60,
      price: 168,
      icon: 'ğŸ¦¶'
    }
  ];

  // Mock æ•°æ® - æ¨èæŠ€å¸ˆ
  const recommendTechs = [
    { id: 1, name: 'å¼ å¸ˆå‚…', rating: 4.9, orders: 328, avatar: 'ğŸ‘¨' },
    { id: 2, name: 'æå¸ˆå‚…', rating: 4.8, orders: 256, avatar: 'ğŸ‘©' },
    { id: 3, name: 'ç‹å¸ˆå‚…', rating: 4.9, orders: 412, avatar: 'ğŸ‘¨' },
    { id: 4, name: 'é™ˆå¸ˆå‚…', rating: 4.7, orders: 189, avatar: 'ğŸ‘©' },
    { id: 5, name: 'åˆ˜å¸ˆå‚…', rating: 4.8, orders: 275, avatar: 'ğŸ‘¨' }
  ];

  // æ¸²æŸ“åˆ†ç±»
  function renderCategories() {
    const grid = document.getElementById('categoryGrid');
    grid.innerHTML = categories.map(cat => `
      <div class="category-item" onclick="QY.navigateTo('service/list', { categoryId: ${cat.id} })">
        <div class="category-icon" style="background: ${cat.color}">
          ${cat.icon}
        </div>
        <span class="category-name">${cat.name}</span>
      </div>
    `).join('');
  }

  // æ¸²æŸ“çƒ­é—¨æœåŠ¡
  function renderHotServices() {
    const list = document.getElementById('hotServiceList');
    list.innerHTML = hotServices.map(service => `
      <div class="service-item" onclick="QY.navigateTo('service/detail', { id: ${service.id} })">
        <div class="service-image">${service.icon}</div>
        <div class="service-info">
          <div>
            <div class="service-name">${service.name}</div>
            <div class="service-desc">${service.desc}</div>
          </div>
          <div class="service-meta">
            <span class="service-duration">${service.duration}åˆ†é’Ÿ</span>
            <span class="service-price">${service.price}èµ·</span>
          </div>
        </div>
      </div>
    `).join('');
  }

  // æ¸²æŸ“æ¨èæŠ€å¸ˆ
  function renderRecommendTechs() {
    const list = document.getElementById('recommendTechList');
    list.innerHTML = recommendTechs.map(tech => `
      <div class="tech-card" onclick="QY.navigateTo('technician/detail', { id: ${tech.id} })">
        <div class="tech-avatar">${tech.avatar}</div>
        <div class="tech-name">${tech.name}</div>
        <div class="tech-rating">â­ ${tech.rating}</div>
        <div class="tech-orders">å·²æœåŠ¡${tech.orders}å•</div>
      </div>
    `).join('');
  }

  // Banner è½®æ’­
  function initBannerSwiper() {
    const wrapper = document.querySelector('.swiper-wrapper');
    const slides = document.querySelectorAll('.swiper-slide');
    const pagination = document.getElementById('bannerPagination');
    let currentIndex = 0;
    const total = slides.length;

    // åˆ›å»ºåˆ†é¡µç‚¹
    pagination.innerHTML = Array.from({ length: total }, (_, i) => 
      `<span class="dot ${i === 0 ? 'active' : ''}"></span>`
    ).join('');

    const dots = pagination.querySelectorAll('.dot');

    function goToSlide(index) {
      currentIndex = index;
      wrapper.style.transform = `translateX(-${index * 100}%)`;
      dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
      });
    }

    // è‡ªåŠ¨è½®æ’­
    setInterval(() => {
      goToSlide((currentIndex + 1) % total);
    }, 4000);

    // è§¦æ‘¸æ»‘åŠ¨æ”¯æŒ
    let startX = 0;
    let isDragging = false;

    wrapper.addEventListener('touchstart', (e) => {
      startX = e.touches[0].clientX;
      isDragging = true;
    });

    wrapper.addEventListener('touchend', (e) => {
      if (!isDragging) return;
      const endX = e.changedTouches[0].clientX;
      const diff = startX - endX;
      
      if (Math.abs(diff) > 50) {
        if (diff > 0 && currentIndex < total - 1) {
          goToSlide(currentIndex + 1);
        } else if (diff < 0 && currentIndex > 0) {
          goToSlide(currentIndex - 1);
        }
      }
      isDragging = false;
    });
  }

  // åˆå§‹åŒ–
  renderCategories();
  renderHotServices();
  renderRecommendTechs();
  initBannerSwiper();

})();
</script>
