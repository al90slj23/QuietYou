<div class="technician-detail-page" id="technicianDetailPage">
  <!-- æŠ€å¸ˆå¤´éƒ¨ä¿¡æ¯ -->
  <div class="tech-header">
    <div class="tech-avatar-section">
      <div class="tech-avatar" id="techAvatar">ğŸ‘¨</div>
      <div class="tech-status" id="techStatus">åœ¨çº¿</div>
    </div>
    <div class="tech-basic-info">
      <div class="tech-name-row">
        <span class="tech-name" id="techName">å¼ å¸ˆå‚…</span>
        <span class="tech-gender" id="techGender">â™‚</span>
      </div>
      <div class="tech-shop" id="techShop">åº·ä¹å…»ç”Ÿé¦†</div>
      <div class="tech-stats">
        <div class="stat-item">
          <span class="stat-value" id="techRating">4.9</span>
          <span class="stat-label">è¯„åˆ†</span>
        </div>
        <div class="stat-divider"></div>
        <div class="stat-item">
          <span class="stat-value" id="techOrders">328</span>
          <span class="stat-label">æœåŠ¡</span>
        </div>
        <div class="stat-divider"></div>
        <div class="stat-item">
          <span class="stat-value" id="techYears">5å¹´</span>
          <span class="stat-label">ç»éªŒ</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ç…§ç‰‡é›† -->
  <div class="section card">
    <div class="section-title">ç…§ç‰‡é›†</div>
    <div class="photo-gallery" id="photoGallery">
      <!-- åŠ¨æ€åŠ è½½ -->
    </div>
  </div>

  <!-- ä¸ªäººç®€ä»‹ -->
  <div class="section card">
    <div class="section-title">ä¸ªäººç®€ä»‹</div>
    <div class="tech-intro" id="techIntro">
      <!-- åŠ¨æ€åŠ è½½ -->
    </div>
  </div>

  <!-- æœåŠ¡é¡¹ç›® -->
  <div class="section card">
    <div class="section-title">æœåŠ¡é¡¹ç›®</div>
    <div class="service-items" id="serviceItems">
      <!-- åŠ¨æ€åŠ è½½ -->
    </div>
  </div>

  <!-- ç”¨æˆ·è¯„ä»· -->
  <div class="section card">
    <div class="section-title flex flex-between">
      <span>ç”¨æˆ·è¯„ä»· (<span id="reviewCount">0</span>)</span>
      <span class="text-secondary" style="font-size: 12px; font-weight: normal;">
        å¥½è¯„ç‡ <span id="goodRate">100%</span>
      </span>
    </div>
    <div class="review-list" id="reviewList">
      <!-- åŠ¨æ€åŠ è½½ -->
    </div>
  </div>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <div class="bottom-bar">
    <div class="price-info">
      <span class="price-label">èµ·æ­¥ä»·</span>
      <span class="price-value" id="techPrice">Â¥198</span>
    </div>
    <button class="btn btn-primary btn-book" onclick="bookService()">ç«‹å³é¢„çº¦</button>
  </div>
</div>

<style>
.technician-detail-page {
  background: var(--bg-color);
  min-height: 100%;
  padding-bottom: 70px;
}

/* Header */
.tech-header {
  background: linear-gradient(135deg, var(--primary-color) 0%, #10b981 100%);
  padding: 20px 16px;
  display: flex;
  align-items: center;
}

.tech-avatar-section {
  position: relative;
  margin-right: 16px;
}

.tech-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: var(--bg-white);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  border: 3px solid rgba(255, 255, 255, 0.3);
}

.tech-status {
  position: absolute;
  bottom: -4px;
  left: 50%;
  transform: translateX(-50%);
  padding: 2px 8px;
  border-radius: 10px;
  font-size: 10px;
  color: #fff;
  background: var(--primary-color);
  white-space: nowrap;
}

.tech-status.busy {
  background: var(--warning-color);
}

.tech-status.offline {
  background: var(--text-placeholder);
}

.tech-basic-info {
  flex: 1;
  color: #fff;
}

.tech-name-row {
  display: flex;
  align-items: center;
  margin-bottom: 4px;
}

.tech-name {
  font-size: 20px;
  font-weight: 600;
  margin-right: 8px;
}

.tech-gender {
  font-size: 14px;
  padding: 2px 8px;
  border-radius: 4px;
  background: rgba(255, 255, 255, 0.2);
}

.tech-shop {
  font-size: 13px;
  opacity: 0.9;
  margin-bottom: 12px;
}

.tech-stats {
  display: flex;
  align-items: center;
}

.stat-item {
  text-align: center;
}

.stat-value {
  display: block;
  font-size: 18px;
  font-weight: 600;
}

.stat-label {
  font-size: 11px;
  opacity: 0.8;
}

.stat-divider {
  width: 1px;
  height: 24px;
  background: rgba(255, 255, 255, 0.3);
  margin: 0 20px;
}

/* Section */
.section {
  margin: 12px;
}

.section-title {
  font-size: 16px;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 12px;
}

/* Photo Gallery */
.photo-gallery {
  display: flex;
  gap: 8px;
  overflow-x: auto;
  padding-bottom: 4px;
  -webkit-overflow-scrolling: touch;
}

.photo-gallery::-webkit-scrollbar {
  display: none;
}

.photo-item {
  flex-shrink: 0;
  width: 120px;
  height: 120px;
  border-radius: 8px;
  background: linear-gradient(135deg, #e8f8ef 0%, #d1fae5 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 48px;
}

/* Intro */
.tech-intro {
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.8;
}

/* Service Items */
.service-items {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.service-item {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px;
  background: var(--bg-color);
  border-radius: 8px;
}

.service-item-info {
  flex: 1;
}

.service-item-name {
  font-size: 15px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.service-item-duration {
  font-size: 12px;
  color: var(--text-placeholder);
}

.service-item-price {
  font-size: 16px;
  font-weight: 600;
  color: var(--danger-color);
}

.service-item-price::before {
  content: 'Â¥';
  font-size: 12px;
}

/* Review List */
.review-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.review-item {
  padding-bottom: 16px;
  border-bottom: 1px solid var(--border-color);
}

.review-item:last-child {
  padding-bottom: 0;
  border-bottom: none;
}

.review-header {
  display: flex;
  align-items: center;
  margin-bottom: 8px;
}

.review-avatar {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  background: var(--bg-color);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  margin-right: 10px;
}

.review-user-info {
  flex: 1;
}

.review-user-name {
  font-size: 14px;
  color: var(--text-primary);
}

.review-time {
  font-size: 12px;
  color: var(--text-placeholder);
}

.review-rating {
  color: var(--warning-color);
  font-size: 12px;
}

.review-content {
  font-size: 14px;
  color: var(--text-secondary);
  line-height: 1.6;
  margin-bottom: 8px;
}

.review-photos {
  display: flex;
  gap: 8px;
}

.review-photo {
  width: 80px;
  height: 80px;
  border-radius: 4px;
  background: var(--bg-color);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
}

.review-service {
  font-size: 12px;
  color: var(--text-placeholder);
  margin-top: 8px;
}

/* Bottom Bar */
.bottom-bar {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 60px;
  background: var(--bg-white);
  border-top: 1px solid var(--border-color);
  display: flex;
  align-items: center;
  padding: 0 16px;
  z-index: 100;
}

.price-info {
  flex: 1;
}

.price-label {
  font-size: 12px;
  color: var(--text-placeholder);
  display: block;
}

.price-value {
  font-size: 20px;
  font-weight: 600;
  color: var(--danger-color);
}

.btn-book {
  padding: 12px 32px;
  font-size: 16px;
  border-radius: 24px;
}

/* Empty Reviews */
.empty-reviews {
  text-align: center;
  padding: 20px;
  color: var(--text-placeholder);
}
</style>


<script>
(function() {
  // è·å–æŠ€å¸ˆID
  const params = QY.getParams();
  const techId = parseInt(params.id) || 1;

  // Mock æ•°æ® - æŠ€å¸ˆè¯¦æƒ…
  const technicianData = {
    1: {
      id: 1, name: 'å¼ å¸ˆå‚…', gender: 1, avatar: 'ğŸ‘¨', shopName: 'åº·ä¹å…»ç”Ÿé¦†',
      rating: 4.9, ratingCount: 156, orderCount: 328, years: 5, price: 198,
      status: 1, statusText: 'åœ¨çº¿',
      intro: 'ä»äº‹æŒ‰æ‘©æ¨æ‹¿è¡Œä¸š5å¹´ï¼Œæ“…é•¿ä¸­å¼æ¨æ‹¿ã€è‚©é¢ˆè°ƒç†ã€‚æ›¾åœ¨å¤šå®¶çŸ¥åå…»ç”Ÿé¦†å·¥ä½œï¼Œç§¯ç´¯äº†ä¸°å¯Œçš„å®è·µç»éªŒã€‚æ‰‹æ³•ä¸“ä¸šï¼ŒåŠ›åº¦é€‚ä¸­ï¼Œæ·±å—é¡¾å®¢å¥½è¯„ã€‚',
      photos: ['ğŸ’†', 'ğŸ§˜', 'ğŸ’ª'],
      services: [
        { id: 1, name: 'å…¨èº«ä¸­å¼æ¨æ‹¿', duration: 60, price: 298 },
        { id: 2, name: 'è‚©é¢ˆæ·±åº¦è°ƒç†', duration: 45, price: 198 },
        { id: 3, name: 'èƒŒéƒ¨æ¨æ‹¿æ”¾æ¾', duration: 45, price: 218 }
      ]
    },
    2: {
      id: 2, name: 'æå¸ˆå‚…', gender: 2, avatar: 'ğŸ‘©', shopName: 'æ‚¦äº«SPAä¼šæ‰€',
      rating: 4.8, ratingCount: 98, orderCount: 256, years: 3, price: 228,
      status: 1, statusText: 'åœ¨çº¿',
      intro: 'ä¸“ä¸šSPAç†ç–—å¸ˆï¼Œæ“…é•¿ç²¾æ²¹æŒ‰æ‘©ã€æ³°å¼æŒ‰æ‘©ã€‚æ¸©æŸ”ç»†è‡´ï¼Œæ³¨é‡å®¢æˆ·ä½“éªŒï¼Œè®©æ‚¨åœ¨æ”¾æ¾ä¸­äº«å—ä¸“ä¸šæœåŠ¡ã€‚',
      photos: ['ğŸŒ¸', 'ğŸ§˜', 'ğŸ’†'],
      services: [
        { id: 4, name: 'ç²¾æ²¹é¦™è–°SPA', duration: 90, price: 458 },
        { id: 5, name: 'æ³°å¼å¤æ³•æŒ‰æ‘©', duration: 90, price: 398 },
        { id: 6, name: 'å…¨èº«ä¸­å¼æ¨æ‹¿', duration: 60, price: 288 }
      ]
    }
  };

  // Mock æ•°æ® - è¯„ä»·åˆ—è¡¨ï¼ˆæŒ‰æ—¶é—´é™åºæ’åˆ—ï¼‰
  const reviewsData = [
    { id: 1, techId: 1, userId: 101, userName: 'ç”¨æˆ·***8', avatar: 'ğŸ˜Š', rating: 5, content: 'å¼ å¸ˆå‚…æ‰‹æ³•å¾ˆä¸“ä¸šï¼ŒåŠ›åº¦åˆšåˆšå¥½ï¼Œåšå®Œæ•´ä¸ªäººéƒ½è½»æ¾äº†å¾ˆå¤šã€‚ä¸‹æ¬¡è¿˜ä¼šé¢„çº¦ï¼', photos: ['ğŸ“·'], serviceName: 'å…¨èº«ä¸­å¼æ¨æ‹¿', createdAt: '2026-01-10 18:30' },
    { id: 2, techId: 1, userId: 102, userName: 'ç”¨æˆ·***2', avatar: 'ğŸ˜„', rating: 5, content: 'è‚©é¢ˆè°ƒç†æ•ˆæœå¾ˆå¥½ï¼Œå›°æ‰°æˆ‘å¾ˆä¹…çš„è‚©è†€é…¸ç—›ç¼“è§£äº†ä¸å°‘ã€‚', photos: [], serviceName: 'è‚©é¢ˆæ·±åº¦è°ƒç†', createdAt: '2026-01-09 20:15' },
    { id: 3, techId: 1, userId: 103, userName: 'ç”¨æˆ·***5', avatar: 'ğŸ™‚', rating: 4, content: 'æœåŠ¡æ€åº¦å¾ˆå¥½ï¼Œå‡†æ—¶åˆ°è¾¾ï¼Œæ•´ä½“ä½“éªŒä¸é”™ã€‚', photos: [], serviceName: 'èƒŒéƒ¨æ¨æ‹¿æ”¾æ¾', createdAt: '2026-01-08 14:20' },
    { id: 4, techId: 1, userId: 104, userName: 'ç”¨æˆ·***9', avatar: 'ğŸ˜Š', rating: 5, content: 'éå¸¸æ»¡æ„ï¼å¸ˆå‚…å¾ˆä¸“ä¸šï¼Œä¼šæ ¹æ®èº«ä½“æƒ…å†µè°ƒæ•´æ‰‹æ³•ã€‚å¼ºçƒˆæ¨èï¼', photos: ['ğŸ“·', 'ğŸ“·'], serviceName: 'å…¨èº«ä¸­å¼æ¨æ‹¿', createdAt: '2026-01-07 16:45' },
    { id: 5, techId: 2, userId: 105, userName: 'ç”¨æˆ·***1', avatar: 'ğŸ˜„', rating: 5, content: 'ç²¾æ²¹SPAå¤ªèˆ’æœäº†ï¼Œæ•´ä¸ªäººéƒ½æ”¾æ¾ä¸‹æ¥äº†ã€‚æå¸ˆå‚…æ‰‹æ³•å¾ˆæ¸©æŸ”ã€‚', photos: ['ğŸ“·'], serviceName: 'ç²¾æ²¹é¦™è–°SPA', createdAt: '2026-01-10 15:00' },
    { id: 6, techId: 2, userId: 106, userName: 'ç”¨æˆ·***7', avatar: 'ğŸ™‚', rating: 4, content: 'æ³°å¼æŒ‰æ‘©å¾ˆæ­£å®—ï¼Œæ‹‰ä¼¸åˆ°ä½ï¼Œå°±æ˜¯æœ‰ç‚¹ç–¼ï¼Œä¸è¿‡æ•ˆæœå¾ˆå¥½ã€‚', photos: [], serviceName: 'æ³°å¼å¤æ³•æŒ‰æ‘©', createdAt: '2026-01-09 19:30' }
  ];

  // è·å–æŠ€å¸ˆæ•°æ®
  const tech = technicianData[techId] || technicianData[1];
  
  // è·å–è¯¥æŠ€å¸ˆçš„è¯„ä»·ï¼ˆæŒ‰æ—¶é—´é™åºï¼‰
  const reviews = reviewsData
    .filter(r => r.techId === tech.id)
    .sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));

  // æ¸²æŸ“æŠ€å¸ˆåŸºæœ¬ä¿¡æ¯
  function renderBasicInfo() {
    document.getElementById('techAvatar').textContent = tech.avatar;
    document.getElementById('techName').textContent = tech.name;
    document.getElementById('techGender').textContent = tech.gender === 1 ? 'â™‚' : 'â™€';
    document.getElementById('techGender').className = `tech-gender ${tech.gender === 1 ? 'male' : 'female'}`;
    document.getElementById('techShop').textContent = tech.shopName;
    document.getElementById('techRating').textContent = tech.rating;
    document.getElementById('techOrders').textContent = tech.orderCount;
    document.getElementById('techYears').textContent = tech.years + 'å¹´';
    document.getElementById('techPrice').textContent = 'Â¥' + tech.price;
    
    const statusEl = document.getElementById('techStatus');
    statusEl.textContent = tech.statusText;
    if (tech.status === 2) statusEl.classList.add('busy');
    if (tech.status === 0) statusEl.classList.add('offline');
  }

  // æ¸²æŸ“ç…§ç‰‡é›†
  function renderPhotos() {
    const gallery = document.getElementById('photoGallery');
    gallery.innerHTML = tech.photos.map(photo => `
      <div class="photo-item">${photo}</div>
    `).join('');
  }

  // æ¸²æŸ“ä¸ªäººç®€ä»‹
  function renderIntro() {
    document.getElementById('techIntro').textContent = tech.intro;
  }

  // æ¸²æŸ“æœåŠ¡é¡¹ç›®
  function renderServices() {
    const container = document.getElementById('serviceItems');
    container.innerHTML = tech.services.map(service => `
      <div class="service-item" onclick="QY.navigateTo('order/create', { techId: ${tech.id}, serviceId: ${service.id} })">
        <div class="service-item-info">
          <div class="service-item-name">${service.name}</div>
          <div class="service-item-duration">${service.duration}åˆ†é’Ÿ</div>
        </div>
        <div class="service-item-price">${service.price}</div>
      </div>
    `).join('');
  }

  // æ¸²æŸ“è¯„ä»·åˆ—è¡¨
  function renderReviews() {
    document.getElementById('reviewCount').textContent = reviews.length;
    
    // è®¡ç®—å¥½è¯„ç‡
    const goodReviews = reviews.filter(r => r.rating >= 4).length;
    const goodRate = reviews.length > 0 ? Math.round(goodReviews / reviews.length * 100) : 100;
    document.getElementById('goodRate').textContent = goodRate + '%';

    const container = document.getElementById('reviewList');
    
    if (reviews.length === 0) {
      container.innerHTML = '<div class="empty-reviews">æš‚æ— è¯„ä»·</div>';
      return;
    }

    container.innerHTML = reviews.map(review => `
      <div class="review-item">
        <div class="review-header">
          <div class="review-avatar">${review.avatar}</div>
          <div class="review-user-info">
            <div class="review-user-name">${review.userName}</div>
            <div class="review-time">${review.createdAt}</div>
          </div>
          <div class="review-rating">${'â­'.repeat(review.rating)}</div>
        </div>
        <div class="review-content">${review.content}</div>
        ${review.photos.length > 0 ? `
          <div class="review-photos">
            ${review.photos.map(p => `<div class="review-photo">${p}</div>`).join('')}
          </div>
        ` : ''}
        <div class="review-service">æœåŠ¡é¡¹ç›®ï¼š${review.serviceName}</div>
      </div>
    `).join('');
  }

  // é¢„çº¦æœåŠ¡
  window.bookService = function() {
    if (tech.status === 0) {
      QY.showToast('æŠ€å¸ˆå½“å‰ç¦»çº¿ï¼Œè¯·é€‰æ‹©å…¶ä»–æŠ€å¸ˆ');
      return;
    }
    QY.navigateTo('order/create', { techId: tech.id });
  };

  // åˆå§‹åŒ–
  renderBasicInfo();
  renderPhotos();
  renderIntro();
  renderServices();
  renderReviews();

})();
</script>
