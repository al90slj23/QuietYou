<div class="technician-list-page">
  <!-- ç­›é€‰æ  -->
  <div class="filter-bar">
    <div class="filter-item" id="filterGender" onclick="toggleFilter('gender')">
      <span>æ€§åˆ«</span>
      <svg class="filter-arrow" width="12" height="12" viewBox="0 0 12 12">
        <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" fill="none" stroke-width="1.5"/>
      </svg>
    </div>
    <div class="filter-item" id="filterRating" onclick="toggleFilter('rating')">
      <span>è¯„åˆ†</span>
      <svg class="filter-arrow" width="12" height="12" viewBox="0 0 12 12">
        <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" fill="none" stroke-width="1.5"/>
      </svg>
    </div>
    <div class="filter-item" id="filterDistance" onclick="toggleFilter('distance')">
      <span>è·ç¦»</span>
      <svg class="filter-arrow" width="12" height="12" viewBox="0 0 12 12">
        <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" fill="none" stroke-width="1.5"/>
      </svg>
    </div>
    <div class="filter-item" id="filterSort" onclick="toggleFilter('sort')">
      <span>ç»¼åˆæ’åº</span>
      <svg class="filter-arrow" width="12" height="12" viewBox="0 0 12 12">
        <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" fill="none" stroke-width="1.5"/>
      </svg>
    </div>
  </div>

  <!-- ç­›é€‰é¢æ¿ -->
  <div class="filter-panel" id="filterPanel" style="display: none;">
    <div class="filter-panel-content" id="filterPanelContent">
      <!-- åŠ¨æ€å†…å®¹ -->
    </div>
    <div class="filter-panel-mask" onclick="closeFilter()"></div>
  </div>

  <!-- æŠ€å¸ˆåˆ—è¡¨ -->
  <div class="technician-list" id="technicianList">
    <!-- åŠ¨æ€åŠ è½½ -->
  </div>

  <!-- ç©ºçŠ¶æ€ -->
  <div class="empty-state" id="emptyState" style="display: none;">
    <div class="empty-icon">ğŸ”</div>
    <div class="empty-text">æš‚æ— ç¬¦åˆæ¡ä»¶çš„æŠ€å¸ˆ</div>
    <button class="btn btn-secondary" onclick="resetFilters()">é‡ç½®ç­›é€‰</button>
  </div>
</div>

<style>
.technician-list-page {
  background: var(--bg-color);
  min-height: 100%;
}

/* Filter Bar */
.filter-bar {
  display: flex;
  background: var(--bg-white);
  border-bottom: 1px solid var(--border-color);
  position: sticky;
  top: 0;
  z-index: 10;
}

.filter-item {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px;
  font-size: 13px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: color 0.2s;
}

.filter-item.active {
  color: var(--primary-color);
}

.filter-item.active .filter-arrow {
  transform: rotate(180deg);
}

.filter-arrow {
  margin-left: 4px;
  transition: transform 0.2s;
}

/* Filter Panel */
.filter-panel {
  position: fixed;
  top: calc(var(--header-height) + 44px);
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 50;
}

.filter-panel-content {
  background: var(--bg-white);
  padding: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.filter-panel-mask {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.3);
  z-index: -1;
}

.filter-options {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.filter-option {
  padding: 8px 16px;
  border-radius: 4px;
  font-size: 13px;
  color: var(--text-secondary);
  background: var(--bg-color);
  cursor: pointer;
  transition: all 0.2s;
}

.filter-option.active {
  color: var(--primary-color);
  background: var(--primary-light);
}

/* Technician List */
.technician-list {
  padding: 12px;
}

.technician-card {
  display: flex;
  background: var(--bg-white);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: transform 0.2s;
}

.technician-card:active {
  transform: scale(0.98);
}

.technician-avatar {
  width: 80px;
  height: 80px;
  border-radius: 50%;
  background: linear-gradient(135deg, #e8f8ef 0%, #d1fae5 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 36px;
  flex-shrink: 0;
  position: relative;
}

.technician-status {
  position: absolute;
  bottom: 2px;
  right: 2px;
  width: 16px;
  height: 16px;
  border-radius: 50%;
  border: 2px solid var(--bg-white);
}

.technician-status.online {
  background: var(--primary-color);
}

.technician-status.busy {
  background: var(--warning-color);
}

.technician-status.offline {
  background: var(--text-placeholder);
}

.technician-info {
  flex: 1;
  margin-left: 12px;
  display: flex;
  flex-direction: column;
}

.technician-header {
  display: flex;
  align-items: center;
  margin-bottom: 4px;
}

.technician-name {
  font-size: 16px;
  font-weight: 500;
  color: var(--text-primary);
  margin-right: 8px;
}

.technician-gender {
  font-size: 12px;
  padding: 1px 6px;
  border-radius: 2px;
  background: var(--bg-color);
}

.technician-gender.male {
  color: #3b82f6;
  background: #dbeafe;
}

.technician-gender.female {
  color: #ec4899;
  background: #fce7f3;
}

.technician-shop {
  font-size: 12px;
  color: var(--text-secondary);
  margin-bottom: 6px;
}

.technician-stats {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 6px;
}

.technician-rating {
  display: flex;
  align-items: center;
  font-size: 13px;
  color: var(--warning-color);
}

.technician-rating svg {
  margin-right: 2px;
}

.technician-orders {
  font-size: 12px;
  color: var(--text-placeholder);
}

.technician-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: auto;
}

.technician-distance {
  font-size: 12px;
  color: var(--text-placeholder);
}

.technician-distance svg {
  vertical-align: middle;
  margin-right: 2px;
}

.technician-price {
  font-size: 14px;
  color: var(--danger-color);
  font-weight: 500;
}

.technician-price::before {
  content: 'Â¥';
  font-size: 11px;
}

.technician-price-suffix {
  font-size: 11px;
  font-weight: normal;
  color: var(--text-placeholder);
}

/* Empty State */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
}

.empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.empty-text {
  font-size: 14px;
  color: var(--text-placeholder);
  margin-bottom: 20px;
}
</style>


<script>
(function() {
  // Mock æ•°æ® - æŠ€å¸ˆåˆ—è¡¨
  const allTechnicians = [
    { id: 1, name: 'å¼ å¸ˆå‚…', gender: 1, avatar: 'ğŸ‘¨', shopName: 'åº·ä¹å…»ç”Ÿé¦†', rating: 4.9, ratingCount: 156, orderCount: 328, distance: 1.2, price: 198, status: 1 },
    { id: 2, name: 'æå¸ˆå‚…', gender: 2, avatar: 'ğŸ‘©', shopName: 'æ‚¦äº«SPAä¼šæ‰€', rating: 4.8, ratingCount: 98, orderCount: 256, distance: 2.5, price: 228, status: 1 },
    { id: 3, name: 'ç‹å¸ˆå‚…', gender: 1, avatar: 'ğŸ‘¨', shopName: 'åº·ä¹å…»ç”Ÿé¦†', rating: 4.9, ratingCount: 203, orderCount: 412, distance: 0.8, price: 268, status: 2 },
    { id: 4, name: 'é™ˆå¸ˆå‚…', gender: 2, avatar: 'ğŸ‘©', shopName: 'èˆ’å¿ƒæŒ‰æ‘©åº—', rating: 4.7, ratingCount: 67, orderCount: 189, distance: 3.8, price: 188, status: 1 },
    { id: 5, name: 'åˆ˜å¸ˆå‚…', gender: 1, avatar: 'ğŸ‘¨', shopName: 'æ‚¦äº«SPAä¼šæ‰€', rating: 4.8, ratingCount: 134, orderCount: 275, distance: 1.5, price: 238, status: 0 },
    { id: 6, name: 'èµµå¸ˆå‚…', gender: 2, avatar: 'ğŸ‘©', shopName: 'åº·ä¹å…»ç”Ÿé¦†', rating: 4.6, ratingCount: 45, orderCount: 123, distance: 4.2, price: 178, status: 1 },
    { id: 7, name: 'å­™å¸ˆå‚…', gender: 1, avatar: 'ğŸ‘¨', shopName: 'èˆ’å¿ƒæŒ‰æ‘©åº—', rating: 4.9, ratingCount: 178, orderCount: 356, distance: 2.1, price: 258, status: 1 },
    { id: 8, name: 'å‘¨å¸ˆå‚…', gender: 2, avatar: 'ğŸ‘©', shopName: 'æ‚¦äº«SPAä¼šæ‰€', rating: 4.5, ratingCount: 34, orderCount: 89, distance: 5.6, price: 168, status: 2 },
    { id: 9, name: 'å´å¸ˆå‚…', gender: 1, avatar: 'ğŸ‘¨', shopName: 'åº·ä¹å…»ç”Ÿé¦†', rating: 4.7, ratingCount: 89, orderCount: 198, distance: 3.2, price: 208, status: 1 },
    { id: 10, name: 'éƒ‘å¸ˆå‚…', gender: 2, avatar: 'ğŸ‘©', shopName: 'èˆ’å¿ƒæŒ‰æ‘©åº—', rating: 4.8, ratingCount: 112, orderCount: 234, distance: 1.8, price: 218, status: 1 }
  ];

  // ç­›é€‰é…ç½®
  const filterConfigs = {
    gender: {
      title: 'æ€§åˆ«',
      options: [
        { label: 'ä¸é™', value: '' },
        { label: 'ç”·æŠ€å¸ˆ', value: '1' },
        { label: 'å¥³æŠ€å¸ˆ', value: '2' }
      ]
    },
    rating: {
      title: 'è¯„åˆ†',
      options: [
        { label: 'ä¸é™', value: '' },
        { label: '4.5åˆ†ä»¥ä¸Š', value: '4.5' },
        { label: '4.7åˆ†ä»¥ä¸Š', value: '4.7' },
        { label: '4.9åˆ†ä»¥ä¸Š', value: '4.9' }
      ]
    },
    distance: {
      title: 'è·ç¦»',
      options: [
        { label: 'ä¸é™', value: '' },
        { label: '3kmä»¥å†…', value: '3' },
        { label: '5kmä»¥å†…', value: '5' },
        { label: '10kmä»¥å†…', value: '10' }
      ]
    },
    sort: {
      title: 'æ’åºæ–¹å¼',
      options: [
        { label: 'ç»¼åˆæ’åº', value: '' },
        { label: 'è·ç¦»æœ€è¿‘', value: 'distance_asc' },
        { label: 'è¯„åˆ†æœ€é«˜', value: 'rating_desc' },
        { label: 'ä»·æ ¼æœ€ä½', value: 'price_asc' },
        { label: 'ä»·æ ¼æœ€é«˜', value: 'price_desc' }
      ]
    }
  };

  // å½“å‰ç­›é€‰çŠ¶æ€
  let currentFilters = {
    gender: '',
    rating: '',
    distance: '',
    sort: ''
  };

  let activeFilterType = null;

  // ä» URL å‚æ•°è·å–åˆå§‹ç­›é€‰
  const params = QY.getParams();
  if (params.serviceId) {
    // å¯ä»¥æ ¹æ®æœåŠ¡IDç­›é€‰æŠ€å¸ˆ
  }

  // åˆ‡æ¢ç­›é€‰é¢æ¿
  window.toggleFilter = function(type) {
    const panel = document.getElementById('filterPanel');
    const filterItems = document.querySelectorAll('.filter-item');
    
    if (activeFilterType === type) {
      closeFilter();
      return;
    }

    activeFilterType = type;
    filterItems.forEach(item => {
      item.classList.toggle('active', item.id === `filter${type.charAt(0).toUpperCase() + type.slice(1)}`);
    });

    renderFilterPanel(type);
    panel.style.display = 'block';
  };

  // å…³é—­ç­›é€‰é¢æ¿
  window.closeFilter = function() {
    const panel = document.getElementById('filterPanel');
    const filterItems = document.querySelectorAll('.filter-item');
    
    activeFilterType = null;
    filterItems.forEach(item => item.classList.remove('active'));
    panel.style.display = 'none';
  };

  // æ¸²æŸ“ç­›é€‰é¢æ¿å†…å®¹
  function renderFilterPanel(type) {
    const content = document.getElementById('filterPanelContent');
    const config = filterConfigs[type];
    
    content.innerHTML = `
      <div class="filter-title" style="font-size: 14px; font-weight: 500; margin-bottom: 12px;">${config.title}</div>
      <div class="filter-options">
        ${config.options.map(opt => `
          <div class="filter-option ${currentFilters[type] === opt.value ? 'active' : ''}" 
               onclick="selectFilter('${type}', '${opt.value}')">
            ${opt.label}
          </div>
        `).join('')}
      </div>
    `;
  }

  // é€‰æ‹©ç­›é€‰é¡¹
  window.selectFilter = function(type, value) {
    currentFilters[type] = value;
    updateFilterLabel(type, value);
    closeFilter();
    renderTechnicianList();
  };

  // æ›´æ–°ç­›é€‰æŒ‰é’®æ–‡å­—
  function updateFilterLabel(type, value) {
    const filterItem = document.getElementById(`filter${type.charAt(0).toUpperCase() + type.slice(1)}`);
    const config = filterConfigs[type];
    const option = config.options.find(opt => opt.value === value);
    
    if (option && value) {
      filterItem.querySelector('span').textContent = option.label;
    } else {
      filterItem.querySelector('span').textContent = config.title.replace('æ–¹å¼', '');
    }
  }

  // é‡ç½®ç­›é€‰
  window.resetFilters = function() {
    currentFilters = { gender: '', rating: '', distance: '', sort: '' };
    renderTechnicianList();
    
    // é‡ç½®ç­›é€‰æŒ‰é’®æ–‡å­—
    document.querySelector('#filterGender span').textContent = 'æ€§åˆ«';
    document.querySelector('#filterRating span').textContent = 'è¯„åˆ†';
    document.querySelector('#filterDistance span').textContent = 'è·ç¦»';
    document.querySelector('#filterSort span').textContent = 'ç»¼åˆæ’åº';
  };


  // ç­›é€‰æŠ€å¸ˆåˆ—è¡¨
  function filterTechnicians() {
    let filtered = [...allTechnicians];

    // æ€§åˆ«ç­›é€‰
    if (currentFilters.gender) {
      const gender = parseInt(currentFilters.gender);
      filtered = filtered.filter(t => t.gender === gender);
    }

    // è¯„åˆ†ç­›é€‰
    if (currentFilters.rating) {
      const minRating = parseFloat(currentFilters.rating);
      filtered = filtered.filter(t => t.rating >= minRating);
    }

    // è·ç¦»ç­›é€‰
    if (currentFilters.distance) {
      const maxDistance = parseFloat(currentFilters.distance);
      filtered = filtered.filter(t => t.distance <= maxDistance);
    }

    // æ’åº
    switch (currentFilters.sort) {
      case 'distance_asc':
        filtered.sort((a, b) => a.distance - b.distance);
        break;
      case 'rating_desc':
        filtered.sort((a, b) => b.rating - a.rating);
        break;
      case 'price_asc':
        filtered.sort((a, b) => a.price - b.price);
        break;
      case 'price_desc':
        filtered.sort((a, b) => b.price - a.price);
        break;
      default:
        // ç»¼åˆæ’åºï¼šé»˜è®¤æŒ‰è·ç¦»
        filtered.sort((a, b) => a.distance - b.distance);
    }

    return filtered;
  }

  // è·å–çŠ¶æ€æ–‡å­—
  function getStatusText(status) {
    switch (status) {
      case 1: return 'åœ¨çº¿';
      case 2: return 'å¿™ç¢Œ';
      default: return 'ç¦»çº¿';
    }
  }

  // è·å–çŠ¶æ€ç±»å
  function getStatusClass(status) {
    switch (status) {
      case 1: return 'online';
      case 2: return 'busy';
      default: return 'offline';
    }
  }

  // æ¸²æŸ“æŠ€å¸ˆåˆ—è¡¨
  function renderTechnicianList() {
    const list = document.getElementById('technicianList');
    const emptyState = document.getElementById('emptyState');
    const technicians = filterTechnicians();

    if (technicians.length === 0) {
      list.style.display = 'none';
      emptyState.style.display = 'flex';
      return;
    }

    list.style.display = 'block';
    emptyState.style.display = 'none';

    list.innerHTML = technicians.map(tech => `
      <div class="technician-card" onclick="QY.navigateTo('technician/detail', { id: ${tech.id} })">
        <div class="technician-avatar">
          ${tech.avatar}
          <span class="technician-status ${getStatusClass(tech.status)}"></span>
        </div>
        <div class="technician-info">
          <div class="technician-header">
            <span class="technician-name">${tech.name}</span>
            <span class="technician-gender ${tech.gender === 1 ? 'male' : 'female'}">
              ${tech.gender === 1 ? 'â™‚' : 'â™€'}
            </span>
          </div>
          <div class="technician-shop">${tech.shopName}</div>
          <div class="technician-stats">
            <span class="technician-rating">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
              </svg>
              ${tech.rating}
            </span>
            <span class="technician-orders">å·²æœåŠ¡${tech.orderCount}å•</span>
          </div>
          <div class="technician-footer">
            <span class="technician-distance">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
              </svg>
              ${tech.distance}km
            </span>
            <span class="technician-price">
              ${tech.price}
              <span class="technician-price-suffix">èµ·</span>
            </span>
          </div>
        </div>
      </div>
    `).join('');
  }

  // åˆå§‹åŒ–
  renderTechnicianList();

})();
</script>
