<div class="service-list-page">
  <!-- ÂàÜÁ±ªÊ†áÁ≠æ -->
  <div class="category-tabs" id="categoryTabs">
    <div class="tab-item active" data-id="0">ÂÖ®ÈÉ®</div>
    <!-- Âä®ÊÄÅÂä†ËΩΩ -->
  </div>

  <!-- Á≠õÈÄâÊ†è -->
  <div class="filter-bar">
    <div class="filter-item" id="filterPrice" onclick="toggleFilter('price')">
      <span>‰ª∑Ê†º</span>
      <svg class="filter-arrow" width="12" height="12" viewBox="0 0 12 12">
        <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" fill="none" stroke-width="1.5"/>
      </svg>
    </div>
    <div class="filter-item" id="filterDuration" onclick="toggleFilter('duration')">
      <span>Êó∂Èïø</span>
      <svg class="filter-arrow" width="12" height="12" viewBox="0 0 12 12">
        <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" fill="none" stroke-width="1.5"/>
      </svg>
    </div>
    <div class="filter-item" id="filterSort" onclick="toggleFilter('sort')">
      <span>ÁªºÂêàÊéíÂ∫è</span>
      <svg class="filter-arrow" width="12" height="12" viewBox="0 0 12 12">
        <path d="M3 4.5L6 7.5L9 4.5" stroke="currentColor" fill="none" stroke-width="1.5"/>
      </svg>
    </div>
  </div>

  <!-- Á≠õÈÄâÈù¢Êùø -->
  <div class="filter-panel" id="filterPanel" style="display: none;">
    <div class="filter-panel-content" id="filterPanelContent">
      <!-- Âä®ÊÄÅÂÜÖÂÆπ -->
    </div>
    <div class="filter-panel-mask" onclick="closeFilter()"></div>
  </div>

  <!-- ÊúçÂä°ÂàóË°® -->
  <div class="service-list" id="serviceList">
    <!-- Âä®ÊÄÅÂä†ËΩΩ -->
  </div>

  <!-- Á©∫Áä∂ÊÄÅ -->
  <div class="empty-state" id="emptyState" style="display: none;">
    <div class="empty-icon">üîç</div>
    <div class="empty-text">ÊöÇÊó†Á¨¶ÂêàÊù°‰ª∂ÁöÑÊúçÂä°</div>
    <button class="btn btn-secondary" onclick="resetFilters()">ÈáçÁΩÆÁ≠õÈÄâ</button>
  </div>
</div>

<style>
.service-list-page {
  background: var(--bg-color);
  min-height: 100%;
}

/* Category Tabs */
.category-tabs {
  display: flex;
  background: var(--bg-white);
  padding: 12px;
  overflow-x: auto;
  gap: 12px;
  -webkit-overflow-scrolling: touch;
}

.category-tabs::-webkit-scrollbar {
  display: none;
}

.tab-item {
  flex-shrink: 0;
  padding: 6px 16px;
  border-radius: 16px;
  font-size: 13px;
  color: var(--text-secondary);
  background: var(--bg-color);
  cursor: pointer;
  transition: all 0.2s;
}

.tab-item.active {
  color: var(--primary-color);
  background: var(--primary-light);
  font-weight: 500;
}

/* Filter Bar */
.filter-bar {
  display: flex;
  background: var(--bg-white);
  border-bottom: 1px solid var(--border-color);
  position: sticky;
  top: 0;
  z-index: 10;
}

.filter-item {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px;
  font-size: 13px;
  color: var(--text-secondary);
  cursor: pointer;
  transition: color 0.2s;
}

.filter-item.active {
  color: var(--primary-color);
}

.filter-item.active .filter-arrow {
  transform: rotate(180deg);
}

.filter-arrow {
  margin-left: 4px;
  transition: transform 0.2s;
}

/* Filter Panel */
.filter-panel {
  position: fixed;
  top: calc(var(--header-height) + 90px);
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 50;
}

.filter-panel-content {
  background: var(--bg-white);
  padding: 16px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.filter-panel-mask {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.3);
  z-index: -1;
}

.filter-options {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
}

.filter-option {
  padding: 8px 16px;
  border-radius: 4px;
  font-size: 13px;
  color: var(--text-secondary);
  background: var(--bg-color);
  cursor: pointer;
  transition: all 0.2s;
}

.filter-option.active {
  color: var(--primary-color);
  background: var(--primary-light);
}

.filter-actions {
  display: flex;
  gap: 12px;
  margin-top: 16px;
  padding-top: 16px;
  border-top: 1px solid var(--border-color);
}

.filter-actions .btn {
  flex: 1;
}

/* Service List */
.service-list {
  padding: 12px;
}

.service-card {
  display: flex;
  background: var(--bg-white);
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 12px;
  cursor: pointer;
  transition: transform 0.2s;
}

.service-card:active {
  transform: scale(0.98);
}

.service-card-image {
  width: 100px;
  height: 100px;
  border-radius: 8px;
  background: linear-gradient(135deg, #e8f8ef 0%, #d1fae5 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 40px;
  flex-shrink: 0;
}

.service-card-info {
  flex: 1;
  margin-left: 12px;
  display: flex;
  flex-direction: column;
}

.service-card-name {
  font-size: 16px;
  font-weight: 500;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.service-card-desc {
  font-size: 12px;
  color: var(--text-secondary);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
  margin-bottom: 8px;
}

.service-card-tags {
  display: flex;
  gap: 6px;
  margin-bottom: 8px;
}

.service-tag {
  padding: 2px 6px;
  font-size: 10px;
  border-radius: 2px;
  background: var(--primary-light);
  color: var(--primary-color);
}

.service-card-footer {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-top: auto;
}

.service-card-duration {
  font-size: 12px;
  color: var(--text-placeholder);
}

.service-card-price {
  font-size: 18px;
  font-weight: 600;
  color: var(--danger-color);
}

.service-card-price::before {
  content: '¬•';
  font-size: 12px;
}

.service-card-price-suffix {
  font-size: 12px;
  font-weight: normal;
  color: var(--text-placeholder);
}

/* Empty State */
.empty-state {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 60px 20px;
}

.empty-icon {
  font-size: 48px;
  margin-bottom: 16px;
}

.empty-text {
  font-size: 14px;
  color: var(--text-placeholder);
  margin-bottom: 20px;
}
</style>


<script>
(function() {
  // Mock Êï∞ÊçÆ - ÊúçÂä°ÂàÜÁ±ª
  const categories = [
    { id: 0, name: 'ÂÖ®ÈÉ®' },
    { id: 1, name: '‰∏≠ÂºèÊé®Êãø' },
    { id: 2, name: 'Ê≥∞ÂºèÊåâÊë©' },
    { id: 3, name: 'Ë∂≥Áñó‰øùÂÅ•' },
    { id: 4, name: 'Á≤æÊ≤πSPA' },
    { id: 5, name: 'ËÇ©È¢àË∞ÉÁêÜ' },
    { id: 6, name: 'ËâæÁÅ∏ÁêÜÁñó' },
    { id: 7, name: 'ÂàÆÁóßÊãîÁΩê' }
  ];

  // Mock Êï∞ÊçÆ - ÊúçÂä°ÂàóË°®
  const allServices = [
    { id: 1, categoryId: 1, name: 'ÂÖ®Ë∫´‰∏≠ÂºèÊé®Êãø', desc: '‰º†ÁªüÊâãÊ≥ïÔºåÁñèÈÄöÁªèÁªúÔºåÁºìËß£Áñ≤Âä≥Ôºå‰øÉËøõË°ÄÊ∂≤Âæ™ÁéØ', duration: 60, price: 298, maxPrice: 398, icon: 'üíÜ', tags: ['ÁÉ≠Èó®', 'Êé®Ëçê'] },
    { id: 2, categoryId: 1, name: 'ËÉåÈÉ®Êé®ÊãøÊîæÊùæ', desc: 'ÈíàÂØπËÉåÈÉ®ËÇåËÇâÁ¥ßÂº†ÔºåÊ∑±Â±ÇÊîæÊùæ', duration: 45, price: 198, maxPrice: 268, icon: 'üíÜ', tags: ['Êñ∞ÂìÅ'] },
    { id: 3, categoryId: 5, name: 'ËÇ©È¢àÊ∑±Â∫¶Ë∞ÉÁêÜ', desc: 'ÈíàÂØπ‰πÖÂùê‰∫∫Áæ§Ôºå‰∏ì‰∏öÊâãÊ≥ïÊîæÊùæËÇ©È¢àÔºåÁºìËß£ÈÖ∏Áóõ', duration: 45, price: 198, maxPrice: 298, icon: 'üí™', tags: ['ÁÉ≠Èó®'] },
    { id: 4, categoryId: 3, name: 'Ë∂≥Â∫ïÂèçÂ∞ÑÁñóÊ≥ï', desc: 'Âà∫ÊøÄË∂≥Â∫ïÁ©¥‰ΩçÔºå‰øÉËøõË°ÄÊ∂≤Âæ™ÁéØÔºåÊîπÂñÑÁù°Áú†', duration: 60, price: 168, maxPrice: 238, icon: 'ü¶∂', tags: [] },
    { id: 5, categoryId: 3, name: 'Ë∂≥ÈÉ®Á≤æÊ≤πÊåâÊë©', desc: 'Á≤æÊ≤πÈÖçÂêàÊåâÊë©ÔºåÊªãÊ∂¶Ë∂≥ÈÉ®ËÇåËÇ§', duration: 45, price: 148, maxPrice: 198, icon: 'ü¶∂', tags: ['Êñ∞ÂìÅ'] },
    { id: 6, categoryId: 2, name: 'Ê≥∞ÂºèÂè§Ê≥ïÊåâÊë©', desc: 'Ê≠£ÂÆóÊ≥∞ÂºèÊâãÊ≥ïÔºåÊãâ‰º∏ÊîæÊùæÂÖ®Ë∫´', duration: 90, price: 398, maxPrice: 498, icon: 'üßò', tags: ['Êé®Ëçê'] },
    { id: 7, categoryId: 4, name: 'Á≤æÊ≤πÈ¶ôËñ∞SPA', desc: 'Â§©ÁÑ∂Á≤æÊ≤πÔºåËàíÁºìË∫´ÂøÉÔºåÊ∑±Â∫¶ÊîæÊùæ', duration: 90, price: 458, maxPrice: 598, icon: 'üå∏', tags: ['ÁÉ≠Èó®'] },
    { id: 8, categoryId: 6, name: 'ËâæÁÅ∏Ê∏©ÁªèË∞ÉÁêÜ', desc: '‰º†ÁªüËâæÁÅ∏ÔºåÊ∏©ÁªèÊï£ÂØíÔºåË∞ÉÁêÜ‰ΩìË¥®', duration: 60, price: 268, maxPrice: 368, icon: 'üî•', tags: [] },
    { id: 9, categoryId: 7, name: 'ÂàÆÁóßÊéíÊØí', desc: '‰º†ÁªüÂàÆÁóßÊâãÊ≥ïÔºåÁñèÈÄöÁªèÁªúÔºåÊéíÂá∫ÊØíÁ¥†', duration: 45, price: 168, maxPrice: 228, icon: 'üè∫', tags: [] },
    { id: 10, categoryId: 7, name: 'ÊãîÁΩêÁêÜÁñó', desc: '‰º†ÁªüÊãîÁΩêÔºåÁ•õÊπøÊï£ÂØíÔºåÁºìËß£Áñ≤Âä≥', duration: 30, price: 128, maxPrice: 168, icon: 'üè∫', tags: [] }
  ];

  // Á≠õÈÄâÈÖçÁΩÆ
  const filterConfigs = {
    price: {
      title: '‰ª∑Ê†ºÂå∫Èó¥',
      options: [
        { label: '‰∏çÈôê', value: '' },
        { label: '200‰ª•‰∏ã', value: '0-200' },
        { label: '200-300', value: '200-300' },
        { label: '300-400', value: '300-400' },
        { label: '400‰ª•‰∏ä', value: '400-9999' }
      ]
    },
    duration: {
      title: 'ÊúçÂä°Êó∂Èïø',
      options: [
        { label: '‰∏çÈôê', value: '' },
        { label: '30ÂàÜÈíü', value: '30' },
        { label: '45ÂàÜÈíü', value: '45' },
        { label: '60ÂàÜÈíü', value: '60' },
        { label: '90ÂàÜÈíü', value: '90' }
      ]
    },
    sort: {
      title: 'ÊéíÂ∫èÊñπÂºè',
      options: [
        { label: 'ÁªºÂêàÊéíÂ∫è', value: '' },
        { label: '‰ª∑Ê†º‰ªé‰ΩéÂà∞È´ò', value: 'price_asc' },
        { label: '‰ª∑Ê†º‰ªéÈ´òÂà∞‰Ωé', value: 'price_desc' },
        { label: 'Êó∂Èïø‰ªéÁü≠Âà∞Èïø', value: 'duration_asc' },
        { label: 'Êó∂Èïø‰ªéÈïøÂà∞Áü≠', value: 'duration_desc' }
      ]
    }
  };

  // ÂΩìÂâçÁ≠õÈÄâÁä∂ÊÄÅ
  let currentFilters = {
    categoryId: 0,
    price: '',
    duration: '',
    sort: ''
  };

  let activeFilterType = null;

  // ‰ªé URL ÂèÇÊï∞Ëé∑ÂèñÂàùÂßãÂàÜÁ±ª
  const params = QY.getParams();
  if (params.categoryId) {
    currentFilters.categoryId = parseInt(params.categoryId);
  }

  // Ê∏≤ÊüìÂàÜÁ±ªÊ†áÁ≠æ
  function renderCategoryTabs() {
    const tabs = document.getElementById('categoryTabs');
    tabs.innerHTML = categories.map(cat => `
      <div class="tab-item ${cat.id === currentFilters.categoryId ? 'active' : ''}" 
           data-id="${cat.id}" 
           onclick="selectCategory(${cat.id})">
        ${cat.name}
      </div>
    `).join('');
  }

  // ÈÄâÊã©ÂàÜÁ±ª
  window.selectCategory = function(id) {
    currentFilters.categoryId = id;
    renderCategoryTabs();
    renderServiceList();
  };

  // ÂàáÊç¢Á≠õÈÄâÈù¢Êùø
  window.toggleFilter = function(type) {
    const panel = document.getElementById('filterPanel');
    const filterItems = document.querySelectorAll('.filter-item');
    
    if (activeFilterType === type) {
      closeFilter();
      return;
    }

    activeFilterType = type;
    filterItems.forEach(item => {
      item.classList.toggle('active', item.id === `filter${type.charAt(0).toUpperCase() + type.slice(1)}`);
    });

    renderFilterPanel(type);
    panel.style.display = 'block';
  };

  // ÂÖ≥Èó≠Á≠õÈÄâÈù¢Êùø
  window.closeFilter = function() {
    const panel = document.getElementById('filterPanel');
    const filterItems = document.querySelectorAll('.filter-item');
    
    activeFilterType = null;
    filterItems.forEach(item => item.classList.remove('active'));
    panel.style.display = 'none';
  };

  // Ê∏≤ÊüìÁ≠õÈÄâÈù¢ÊùøÂÜÖÂÆπ
  function renderFilterPanel(type) {
    const content = document.getElementById('filterPanelContent');
    const config = filterConfigs[type];
    
    content.innerHTML = `
      <div class="filter-title" style="font-size: 14px; font-weight: 500; margin-bottom: 12px;">${config.title}</div>
      <div class="filter-options">
        ${config.options.map(opt => `
          <div class="filter-option ${currentFilters[type] === opt.value ? 'active' : ''}" 
               onclick="selectFilter('${type}', '${opt.value}')">
            ${opt.label}
          </div>
        `).join('')}
      </div>
    `;
  }

  // ÈÄâÊã©Á≠õÈÄâÈ°π
  window.selectFilter = function(type, value) {
    currentFilters[type] = value;
    updateFilterLabel(type, value);
    closeFilter();
    renderServiceList();
  };

  // Êõ¥Êñ∞Á≠õÈÄâÊåâÈíÆÊñáÂ≠ó
  function updateFilterLabel(type, value) {
    const filterItem = document.getElementById(`filter${type.charAt(0).toUpperCase() + type.slice(1)}`);
    const config = filterConfigs[type];
    const option = config.options.find(opt => opt.value === value);
    
    if (option && value) {
      filterItem.querySelector('span').textContent = option.label;
    } else {
      filterItem.querySelector('span').textContent = config.title.replace('Âå∫Èó¥', '').replace('ÊñπÂºè', '');
    }
  }

  // ÈáçÁΩÆÁ≠õÈÄâ
  window.resetFilters = function() {
    currentFilters = { categoryId: 0, price: '', duration: '', sort: '' };
    renderCategoryTabs();
    renderServiceList();
    
    // ÈáçÁΩÆÁ≠õÈÄâÊåâÈíÆÊñáÂ≠ó
    document.querySelector('#filterPrice span').textContent = '‰ª∑Ê†º';
    document.querySelector('#filterDuration span').textContent = 'Êó∂Èïø';
    document.querySelector('#filterSort span').textContent = 'ÁªºÂêàÊéíÂ∫è';
  };


  // Á≠õÈÄâÊúçÂä°ÂàóË°®
  function filterServices() {
    let filtered = [...allServices];

    // ÂàÜÁ±ªÁ≠õÈÄâ
    if (currentFilters.categoryId > 0) {
      filtered = filtered.filter(s => s.categoryId === currentFilters.categoryId);
    }

    // ‰ª∑Ê†ºÁ≠õÈÄâ
    if (currentFilters.price) {
      const [min, max] = currentFilters.price.split('-').map(Number);
      filtered = filtered.filter(s => s.price >= min && s.price <= max);
    }

    // Êó∂ÈïøÁ≠õÈÄâ
    if (currentFilters.duration) {
      const duration = parseInt(currentFilters.duration);
      filtered = filtered.filter(s => s.duration === duration);
    }

    // ÊéíÂ∫è
    if (currentFilters.sort) {
      switch (currentFilters.sort) {
        case 'price_asc':
          filtered.sort((a, b) => a.price - b.price);
          break;
        case 'price_desc':
          filtered.sort((a, b) => b.price - a.price);
          break;
        case 'duration_asc':
          filtered.sort((a, b) => a.duration - b.duration);
          break;
        case 'duration_desc':
          filtered.sort((a, b) => b.duration - a.duration);
          break;
      }
    }

    return filtered;
  }

  // Ê∏≤ÊüìÊúçÂä°ÂàóË°®
  function renderServiceList() {
    const list = document.getElementById('serviceList');
    const emptyState = document.getElementById('emptyState');
    const services = filterServices();

    if (services.length === 0) {
      list.style.display = 'none';
      emptyState.style.display = 'flex';
      return;
    }

    list.style.display = 'block';
    emptyState.style.display = 'none';

    list.innerHTML = services.map(service => `
      <div class="service-card" onclick="QY.navigateTo('service/detail', { id: ${service.id} })">
        <div class="service-card-image">${service.icon}</div>
        <div class="service-card-info">
          <div class="service-card-name">${service.name}</div>
          <div class="service-card-desc">${service.desc}</div>
          ${service.tags.length > 0 ? `
            <div class="service-card-tags">
              ${service.tags.map(tag => `<span class="service-tag">${tag}</span>`).join('')}
            </div>
          ` : ''}
          <div class="service-card-footer">
            <span class="service-card-duration">${service.duration}ÂàÜÈíü</span>
            <span class="service-card-price">
              ${service.price}
              <span class="service-card-price-suffix">Ëµ∑</span>
            </span>
          </div>
        </div>
      </div>
    `).join('');
  }

  // ÂàùÂßãÂåñ
  renderCategoryTabs();
  renderServiceList();

})();
</script>
