# 04.quality-02.git - Git 提交规范

> **文档版本**：v1.0.0
> **创建日期**：2026-01-12
> **基于**：ZERO 框架规范

---

## 📍 文档定位

本文档定义轻养到家项目的 **Git 提交信息格式、分支管理流程**。

---

## 📝 Commit Message 格式

### 基本格式

```
<type>(<scope>): <subject>

<body>

<footer>
```

### 提交类型（Type）

| 类型 | 说明 | 举例 |
|------|------|------|
| `feat` | 新功能 | `feat: 添加用户管理功能` |
| `fix` | 修复 Bug | `fix: 修复登录页面样式问题` |
| `docs` | 文档变更 | `docs: 更新 API 文档` |
| `style` | 代码格式调整 | `style: 调整代码缩进` |
| `refactor` | 代码重构 | `refactor: 重构用户服务层` |
| `perf` | 性能优化 | `perf: 优化列表查询性能` |
| `test` | 测试相关 | `test: 添加用户管理测试用例` |
| `build` | 构建系统 | `build: 升级构建工具` |
| `ci` | CI/CD 配置 | `ci: 添加自动部署配置` |
| `chore` | 其他杂项 | `chore: 更新依赖包版本` |
| `revert` | 回滚提交 | `revert: 回滚用户管理功能` |

### 影响范围（Scope）

常用 Scope：
- `user` - 用户端
- `admin` - 管理后台
- `merchant` - 商户端
- `tech` - 技师端
- `home` - 官网
- `api` - 后端 API
- `db` - 数据库
- `deploy` - 部署相关

### 简短描述（Subject）规则

- 使用祈使句，现在时态
- 首字母小写
- 结尾不加句号
- 不超过 50 个字符

---

## 📋 提交示例

### 新功能

```
feat(user): 添加订单列表页面

实现了用户订单列表功能：
- 支持分页查询
- 支持状态筛选
- 支持订单详情查看

Closes #123
```

### 修复 Bug

```
fix(api): 修复订单创建时间戳错误

问题：订单创建时间显示为 UTC 时间

解决方案：
- 统一使用服务器本地时间
- 前端显示时转换时区

Fixes #456
```

### 代码重构

```
refactor(home): 迁移图标库到 TDesign

将官网首页的图标从 Iconify 迁移到 TDesign Icons：
- 替换所有 Iconify 图标组件
- 更新 package.json 依赖
- 移除 @iconify/vue 依赖
```

---

## 🌿 分支管理规范

### 分支命名

| 分支类型 | 命名格式 | 举例 |
|---------|---------|------|
| 主分支 | `main` | `main` |
| 功能分支 | `feature/<功能名>` | `feature/user-order` |
| 修复分支 | `fix/<问题描述>` | `fix/login-error` |
| 发布分支 | `release/<版本号>` | `release/v1.2.0` |
| 热修复分支 | `hotfix/<问题描述>` | `hotfix/critical-bug` |

### 分支工作流

```
main (生产环境)
  ↑
  └─ feature/user-order
  └─ fix/login-error
```

---

## 🤖 AI 生成提交信息

项目使用 `go.ai.sh` 自动生成 AI 提交摘要：

```bash
# 部署时自动生成
./go.sh 1

# AI 会分析变更文件，生成提交信息
# 用户可以确认或自定义
```

### AI 提交信息格式

```
<type>: <中文描述>

- 变更点1
- 变更点2
- 变更点3
```

---

## ✅ 检查清单

- [ ] Commit 类型正确
- [ ] Subject 不超过 50 字符
- [ ] 分支命名符合规范
- [ ] 提交前已测试功能

---

**最后更新**：2026-01-12
